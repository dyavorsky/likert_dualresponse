<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
    <meta charset="utf-8">
    <meta name="generator" content="quarto-1.6.1">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


    <title>Use a standard dataset for this example</title>
    <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      div.columns{display: flex; gap: min(4vw, 1.5em);}
      div.column{flex: auto; overflow-x: auto;}
      div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
      ul.task-list{list-style: none;}
      ul.task-list li input[type="checkbox"] {
        width: 0.8em;
        margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
        vertical-align: middle;
      }
      /* CSS for syntax highlighting */
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      .sourceCode { overflow: visible; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
        }
      pre.numberSource { margin-left: 3em;  padding-left: 4px; }
      div.sourceCode
        {   }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
    </style>

    <style>
      body.hypothesis-enabled #quarto-embed-header {
        padding-right: 36px;
      }

      #quarto-embed-header {
        height: 3em;
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: solid 1px;
      }

      #quarto-embed-header h6 {
        font-size: 1.1em;
        padding-top: 0.6em;
        margin-left: 1em;
        margin-right: 1em;
        font-weight: 400;
      }

      #quarto-embed-header a.quarto-back-link,
      #quarto-embed-header a.quarto-download-embed {
        font-size: 0.8em;
        margin-top: 1em;
        margin-bottom: 1em;
        margin-left: 1em;
        margin-right: 1em;
      }

      .quarto-back-container {
        padding-left: 0.5em;
        display: flex;
      }

      .headroom {
          will-change: transform;
          transition: transform 200ms linear;
      }

      .headroom--pinned {
          transform: translateY(0%);
      }

      .headroom--unpinned {
          transform: translateY(-100%);
      }      
    </style>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script>
    window.document.addEventListener("DOMContentLoaded", function () {

      var header = window.document.querySelector("#quarto-embed-header");
      const titleBannerEl = window.document.querySelector("body > #title-block-header");
      if (titleBannerEl) {
        titleBannerEl.style.paddingTop = header.clientHeight + "px";
      }
      const contentEl = window.document.getElementById('quarto-content');
      for (const child of contentEl.children) {
        child.style.paddingTop = header.clientHeight + "px";
        child.style.marginTop = "1em";
      }

      // Use the article root if the `back` call doesn't work. This isn't perfect
      // but should typically work
      window.quartoBackToArticle = () => {
        var currentUrl = window.location.href;
        window.history.back();
        setTimeout(() => {
            // if location was not changed in 100 ms, then there is no history back
            if(currentUrl === window.location.href){              
                // redirect to site root
                window.location.href = "../index.html";
            }
        }, 100);
      }

      const headroom = new window.Headroom(header, {
        tolerance: 5,
        onPin: function () {
        },
        onUnpin: function () {
        },
      });
      headroom.init();
    });
    </script>

    
<script src="../site_libs/manuscript-notebook/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
     <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script src="https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js" crossorigin="anonymous"></script>   <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script> 
      </head>

  <body class="quarto-notebook">
    <div id="quarto-embed-header" class="headroom fixed-top bg-primary">
      
      <a onclick="window.quartoBackToArticle(); return false;" class="btn btn-primary quarto-back-link" href=""><i class="bi bi-caret-left"></i> Back to Article</a>
      <h6><i class="bi bi-journal-code"></i> Discrete Choice</h6>

            <a href="../notebooks/example_discretechoice.ipynb" class="btn btn-primary quarto-download-embed" download="example_discretechoice.ipynb">Download Notebook</a>
          </div>

     <header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Use a standard dataset for this example</h1>
          </div>

    
    <div class="quarto-title-meta-container">
      <div class="quarto-title-meta-column-start">
        
        <div class="quarto-title-meta">

                
          
                
              </div>
      </div>
      <div class="quarto-title-meta-column-end quarto-other-formats-target">
      </div>
    </div>



    <div class="quarto-other-links-text-target">
    </div>  </div>
</header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#getting-a-better-fit" id="toc-getting-a-better-fit" class="nav-link active" data-scroll-target="#getting-a-better-fit">Getting a better fit</a></li>
  <li><a href="#bells-and-whistles" id="toc-bells-and-whistles" class="nav-link" data-scroll-target="#bells-and-whistles">Bells and Whistles</a></li>
  <li><a href="#tweaks" id="toc-tweaks" class="nav-link" data-scroll-target="#tweaks">Tweaks</a></li>
  <li><a href="#counterfactuals" id="toc-counterfactuals" class="nav-link" data-scroll-target="#counterfactuals">Counterfactuals</a></li>
  <li><a href="#compare-models" id="toc-compare-models" class="nav-link" data-scroll-target="#compare-models">Compare models</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">      

       <div class="cell-container"><div class="cell-decorator"><pre>In [1]:</pre></div><div id="cell-1" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> arviz <span class="im">as</span> az</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># For vectorized math operations</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># For file input/output</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pymc <span class="im">as</span> pm</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pytensor.tensor <span class="im">as</span> pt</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib <span class="im">import</span> pyplot <span class="im">as</span> plt</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib.lines <span class="im">import</span> Line2D</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>WARNING (pytensor.tensor.blas): Using NumPy C-API based implementation for BLAS functions.</code></pre>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [2]:</pre></div><div id="cell-2" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>config InlineBackend.figure_format <span class="op">=</span> <span class="st">'retina'</span>  <span class="co"># high resolution figures</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>az.style.use(<span class="st">"arviz-darkgrid"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">"font.family"</span>] <span class="op">=</span> <span class="st">"Latin Modern Roman"</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>rng <span class="op">=</span> np.random.default_rng(<span class="dv">42</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
<div id="cell-3" class="cell markdown">

</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [3]:</pre></div><div id="cell-4" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    wide_heating_df <span class="op">=</span> pd.read_csv(<span class="st">"../data/heating_data_r.csv"</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span>:</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    wide_heating_df <span class="op">=</span> pd.read_csv(pm.get_data(<span class="st">"heating_data_r.csv"</span>))</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>wide_heating_df[wide_heating_df[<span class="st">"idcase"</span>] <span class="op">==</span> <span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">idcase</th>
<th data-quarto-table-cell-role="th">depvar</th>
<th data-quarto-table-cell-role="th">ic.gc</th>
<th data-quarto-table-cell-role="th">ic.gr</th>
<th data-quarto-table-cell-role="th">ic.ec</th>
<th data-quarto-table-cell-role="th">ic.er</th>
<th data-quarto-table-cell-role="th">ic.hp</th>
<th data-quarto-table-cell-role="th">oc.gc</th>
<th data-quarto-table-cell-role="th">oc.gr</th>
<th data-quarto-table-cell-role="th">oc.ec</th>
<th data-quarto-table-cell-role="th">oc.er</th>
<th data-quarto-table-cell-role="th">oc.hp</th>
<th data-quarto-table-cell-role="th">income</th>
<th data-quarto-table-cell-role="th">agehed</th>
<th data-quarto-table-cell-role="th">rooms</th>
<th data-quarto-table-cell-role="th">region</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1</td>
<td>gc</td>
<td>866.0</td>
<td>962.64</td>
<td>859.9</td>
<td>995.76</td>
<td>1135.5</td>
<td>199.69</td>
<td>151.72</td>
<td>553.34</td>
<td>505.6</td>
<td>237.88</td>
<td>7</td>
<td>25</td>
<td>6</td>
<td>ncostl</td>
</tr>
</tbody>
</table>

</div>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [4]:</pre></div><div id="cell-5" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pivoted data that is more amenable to analysis</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    long_heating_df <span class="op">=</span> pd.read_csv(<span class="st">"../data/long_heating_data.csv"</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span>:</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    long_heating_df <span class="op">=</span> pd.read_csv(pm.get_data(<span class="st">"long_heating_data.csv"</span>))</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>columns <span class="op">=</span> [c <span class="cf">for</span> c <span class="kw">in</span> long_heating_df.columns <span class="cf">if</span> c <span class="op">!=</span> <span class="st">"Unnamed: 0"</span>]</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>long_heating_df[long_heating_df[<span class="st">"idcase"</span>] <span class="op">==</span> <span class="dv">1</span>][columns]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">idcase</th>
<th data-quarto-table-cell-role="th">alt_id</th>
<th data-quarto-table-cell-role="th">choice</th>
<th data-quarto-table-cell-role="th">depvar</th>
<th data-quarto-table-cell-role="th">income</th>
<th data-quarto-table-cell-role="th">agehed</th>
<th data-quarto-table-cell-role="th">rooms</th>
<th data-quarto-table-cell-role="th">region</th>
<th data-quarto-table-cell-role="th">installation_costs</th>
<th data-quarto-table-cell-role="th">operating_costs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>gc</td>
<td>7</td>
<td>25</td>
<td>6</td>
<td>ncostl</td>
<td>866.00</td>
<td>199.69</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>1</td>
<td>2</td>
<td>0</td>
<td>gc</td>
<td>7</td>
<td>25</td>
<td>6</td>
<td>ncostl</td>
<td>962.64</td>
<td>151.72</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>1</td>
<td>3</td>
<td>0</td>
<td>gc</td>
<td>7</td>
<td>25</td>
<td>6</td>
<td>ncostl</td>
<td>859.90</td>
<td>553.34</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>1</td>
<td>4</td>
<td>0</td>
<td>gc</td>
<td>7</td>
<td>25</td>
<td>6</td>
<td>ncostl</td>
<td>995.76</td>
<td>505.60</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>1</td>
<td>5</td>
<td>0</td>
<td>gc</td>
<td>7</td>
<td>25</td>
<td>6</td>
<td>ncostl</td>
<td>1135.50</td>
<td>237.88</td>
</tr>
</tbody>
</table>

</div>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [5]:</pre></div><div id="cell-6" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> wide_heating_df.shape[<span class="dv">0</span>]</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>observed <span class="op">=</span> pd.Categorical(wide_heating_df[<span class="st">"depvar"</span>]).codes</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>coords <span class="op">=</span> {</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"alts_probs"</span>: [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>, <span class="st">"hp"</span>],</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"obs"</span>: <span class="bu">range</span>(N),</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> pm.Model(coords<span class="op">=</span>coords) <span class="im">as</span> model_1:</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    beta_ic <span class="op">=</span> pm.Normal(<span class="st">"beta_ic"</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    beta_oc <span class="op">=</span> pm.Normal(<span class="st">"beta_oc"</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">## Construct Utility matrix and Pivot</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    u0 <span class="op">=</span> beta_ic <span class="op">*</span> wide_heating_df[<span class="st">"ic.ec"</span>] <span class="op">+</span> beta_oc <span class="op">*</span> wide_heating_df[<span class="st">"oc.ec"</span>]</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    u1 <span class="op">=</span> beta_ic <span class="op">*</span> wide_heating_df[<span class="st">"ic.er"</span>] <span class="op">+</span> beta_oc <span class="op">*</span> wide_heating_df[<span class="st">"oc.er"</span>]</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    u2 <span class="op">=</span> beta_ic <span class="op">*</span> wide_heating_df[<span class="st">"ic.gc"</span>] <span class="op">+</span> beta_oc <span class="op">*</span> wide_heating_df[<span class="st">"oc.gc"</span>]</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    u3 <span class="op">=</span> beta_ic <span class="op">*</span> wide_heating_df[<span class="st">"ic.gr"</span>] <span class="op">+</span> beta_oc <span class="op">*</span> wide_heating_df[<span class="st">"oc.gr"</span>]</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    u4 <span class="op">=</span> np.zeros(N)  <span class="co"># Outside Good</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    s <span class="op">=</span> pm.math.stack([u0, u1, u2, u3, u4]).T</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">## Apply Softmax Transform</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>    p_ <span class="op">=</span> pm.Deterministic(<span class="st">"p"</span>, pm.math.softmax(s, axis<span class="op">=</span><span class="dv">1</span>), dims<span class="op">=</span>(<span class="st">"obs"</span>, <span class="st">"alts_probs"</span>))</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">##&nbsp;Likelihood</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    choice_obs <span class="op">=</span> pm.Categorical(<span class="st">"y_cat"</span>, p<span class="op">=</span>p_, observed<span class="op">=</span>observed, dims<span class="op">=</span><span class="st">"obs"</span>)</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>    idata_m1 <span class="op">=</span> pm.sample_prior_predictive()</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>    idata_m1.extend(</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>        pm.sample(nuts_sampler<span class="op">=</span><span class="st">"numpyro"</span>, idata_kwargs<span class="op">=</span>{<span class="st">"log_likelihood"</span>: <span class="va">True</span>}, random_seed<span class="op">=</span><span class="dv">101</span>)</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>    idata_m1.extend(pm.sample_posterior_predictive(idata_m1))</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>pm.model_to_graphviz(model_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Sampling: [beta_ic, beta_oc, y_cat]</code></pre>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"4b958b56e997424885c351bf8fea45e0","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"472347235a5d495c9a0143b3a3fd2a0c","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"1e5c27613ca948aa865b10a0179658da","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"eb2aa6ab2851448eac98e474dd34238a","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Sampling: [y_cat]</code></pre>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"2771e2847ce141f1917c1f9a0a63867b","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="5">
<div class="">
<figure class="figure">
<p class=""><a href="example_discretechoice_files/figure-html/cell-6-output-10.svg" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="example_discretechoice_files/figure-html/cell-6-output-10.svg" class="img-fluid figure-img"></a></p>
</figure>
</div>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [6]:</pre></div><div id="cell-7" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>idata_m1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">

            <div>
              <div class="xr-header">
                <div class="xr-obj-type">arviz.InferenceData</div>
              </div>
              <ul class="xr-sections group-sections">
              
            <li class="xr-section-item">
                  <input id="idata_posterior5ec86060-7638-4c4a-881e-a787c14b0849" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_posterior5ec86060-7638-4c4a-881e-a787c14b0849" class="xr-section-summary">posterior</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 144MB
Dimensions:     (chain: 4, draw: 1000, obs: 900, alts_probs: 5)
Coordinates:
  * chain       (chain) int64 32B 0 1 2 3
  * draw        (draw) int64 8kB 0 1 2 3 4 5 6 7 ... 993 994 995 996 997 998 999
  * obs         (obs) int64 7kB 0 1 2 3 4 5 6 7 ... 893 894 895 896 897 898 899
  * alts_probs  (alts_probs) &lt;U2 40B 'ec' 'er' 'gc' 'gr' 'hp'
Data variables:
    beta_ic     (chain, draw) float64 32kB 0.001832 0.001817 ... 0.001948
    beta_oc     (chain, draw) float64 32kB -0.003705 -0.003709 ... -0.004581
    p           (chain, draw, obs, alts_probs) float64 144MB 0.07556 ... 0.1102
Attributes:
    created_at:     2024-06-23T20:32:15.207517+00:00
    arviz_version:  0.18.0</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-85a050a5-91cd-4fc6-bd4b-7d094451c3a3" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-85a050a5-91cd-4fc6-bd4b-7d094451c3a3" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">chain</span>: 4</li><li><span class="xr-has-index">draw</span>: 1000</li><li><span class="xr-has-index">obs</span>: 900</li><li><span class="xr-has-index">alts_probs</span>: 5</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-ea9975be-834e-4171-b402-4b78ee8f4998" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-ea9975be-834e-4171-b402-4b78ee8f4998" class="xr-section-summary">Coordinates: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(chain)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3</div><input id="attrs-3a2eb6a8-9220-464f-a2d6-fee4e091f591" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-3a2eb6a8-9220-464f-a2d6-fee4e091f591" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-0c7cd0c6-5a53-44b7-b637-eccd164789b2" class="xr-var-data-in" type="checkbox"><label for="data-0c7cd0c6-5a53-44b7-b637-eccd164789b2" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0, 1, 2, 3])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 995 996 997 998 999</div><input id="attrs-ce83fce1-f177-4a60-af6c-a3c84fc58e61" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-ce83fce1-f177-4a60-af6c-a3c84fc58e61" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-518d6aa3-1b6a-48cf-ae36-5a4175486469" class="xr-var-data-in" type="checkbox"><label for="data-518d6aa3-1b6a-48cf-ae36-5a4175486469" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 997, 998, 999])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">obs</span></div><div class="xr-var-dims">(obs)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 895 896 897 898 899</div><input id="attrs-653c79ca-1515-4c03-9543-4675f8b2c2f4" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-653c79ca-1515-4c03-9543-4675f8b2c2f4" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-e8dfa46c-23ab-4d12-a488-abe81866b639" class="xr-var-data-in" type="checkbox"><label for="data-e8dfa46c-23ab-4d12-a488-abe81866b639" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 897, 898, 899])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">alts_probs</span></div><div class="xr-var-dims">(alts_probs)</div><div class="xr-var-dtype">&lt;U2</div><div class="xr-var-preview xr-preview">'ec' 'er' 'gc' 'gr' 'hp'</div><input id="attrs-e44b1aa0-ebb5-47fc-b5f5-d72a336479ef" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-e44b1aa0-ebb5-47fc-b5f5-d72a336479ef" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-032f60af-daf6-42ff-a305-92ef20cba823" class="xr-var-data-in" type="checkbox"><label for="data-032f60af-daf6-42ff-a305-92ef20cba823" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['ec', 'er', 'gc', 'gr', 'hp'], dtype='&lt;U2')</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-6d3c5515-537b-49ca-8e3e-bd237768c474" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-6d3c5515-537b-49ca-8e3e-bd237768c474" class="xr-section-summary">Data variables: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>beta_ic</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.001832 0.001817 ... 0.001948</div><input id="attrs-a714dbc8-63f6-4145-9197-7a073bf1b552" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-a714dbc8-63f6-4145-9197-7a073bf1b552" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-8957d6fe-47fe-4b7c-baae-949f41bf2750" class="xr-var-data-in" type="checkbox"><label for="data-8957d6fe-47fe-4b7c-baae-949f41bf2750" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.00183239, 0.00181733, 0.00180854, ..., 0.00181192, 0.00175778,
        0.00210304],
       [0.00210654, 0.00210654, 0.00197494, ..., 0.0019049 , 0.00187513,
        0.00181919],
       [0.00181312, 0.00179163, 0.00173467, ..., 0.002031  , 0.00212423,
        0.00171305],
       [0.00185484, 0.00177189, 0.00187684, ..., 0.00206325, 0.00207469,
        0.00194822]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>beta_oc</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-0.003705 -0.003709 ... -0.004581</div><input id="attrs-9d06873e-3e4c-42a5-af05-5eb5c31ad4c9" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-9d06873e-3e4c-42a5-af05-5eb5c31ad4c9" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-24f885a7-7223-4965-aaa6-aac08e86c69e" class="xr-var-data-in" type="checkbox"><label for="data-24f885a7-7223-4965-aaa6-aac08e86c69e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[-0.00370539, -0.00370935, -0.00431479, ..., -0.00461288,
        -0.00460595, -0.00406624],
       [-0.00443282, -0.00443282, -0.00414015, ..., -0.00426425,
        -0.00412309, -0.0040975 ],
       [-0.00395141, -0.00370944, -0.00377519, ..., -0.0049641 ,
        -0.00476948, -0.0036491 ],
       [-0.00381868, -0.00404807, -0.00393956, ..., -0.0042988 ,
        -0.00462425, -0.00458066]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>p</span></div><div class="xr-var-dims">(chain, draw, obs, alts_probs)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.07556 0.1157 ... 0.428 0.1102</div><input id="attrs-a914e6b4-360c-4424-be5a-a34d0b5bf114" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-a914e6b4-360c-4424-be5a-a34d0b5bf114" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-6ff27507-3f75-48ab-8bae-38a15972fed4" class="xr-var-data-in" type="checkbox"><label for="data-6ff27507-3f75-48ab-8bae-38a15972fed4" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[[0.07556231, 0.115677  , 0.28331138, 0.4039845 , 0.1214648 ],
         [0.09409705, 0.12757696, 0.30515943, 0.32297186, 0.15019469],
         [0.10440213, 0.16496078, 0.23067664, 0.3579255 , 0.14203495],
         ...,
         [0.08474306, 0.13638204, 0.23587751, 0.43633533, 0.10666206],
         [0.07042229, 0.18021517, 0.22561794, 0.42184934, 0.10189526],
         [0.08717172, 0.13668048, 0.27121101, 0.40382201, 0.10111478]],

        [[0.07540941, 0.11522867, 0.28310845, 0.40318444, 0.12306902],
         [0.09378437, 0.12698266, 0.30488553, 0.32253151, 0.15181593],
         [0.1041803 , 0.16418621, 0.23085429, 0.35725122, 0.14352798],
         ...,
         [0.08467137, 0.13587604, 0.23615981, 0.43515429, 0.10813849],
         [0.07046016, 0.17950217, 0.22578659, 0.42086267, 0.10338842],
         [0.08701837, 0.13621822, 0.27140404, 0.40272926, 0.10263011]],

        [[0.06122794, 0.0961875 , 0.28473604, 0.41709752, 0.140751  ],
         [0.07754801, 0.10707428, 0.3120934 , 0.3300667 , 0.17321761],
         [0.08971942, 0.14413631, 0.23485909, 0.36901728, 0.1622679 ],
         ...,
...
         ...,
         [0.07148748, 0.12262564, 0.23524756, 0.47222741, 0.09841191],
         [0.05809065, 0.1693353 , 0.22340738, 0.45541326, 0.09375342],
         [0.07380963, 0.12341259, 0.27669202, 0.43293536, 0.0931504 ]],

        [[0.0557185 , 0.09210605, 0.28955146, 0.44171102, 0.12091297],
         [0.07321771, 0.10485256, 0.32256519, 0.34396418, 0.15540036],
         [0.08500087, 0.14479629, 0.23452216, 0.39027898, 0.14540171],
         ...,
         [0.06514664, 0.11311106, 0.2365109 , 0.48142957, 0.10380182],
         [0.05287363, 0.15948594, 0.22320083, 0.4650963 , 0.09934329],
         [0.0669652 , 0.11434375, 0.28043246, 0.43930699, 0.09895161]],

        [[0.05622438, 0.09116917, 0.28748885, 0.43233235, 0.13278524],
         [0.07282079, 0.10284997, 0.31870176, 0.33851648, 0.16711101],
         [0.08500239, 0.14132398, 0.2353021 , 0.38212832, 0.15624321],
         ...,
         [0.06612004, 0.11180751, 0.23856091, 0.46873109, 0.11478046],
         [0.05429461, 0.15656816, 0.22464392, 0.4540332 , 0.11046011],
         [0.06750051, 0.11316997, 0.28109683, 0.4280232 , 0.11020948]]]])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-a005acf9-35b8-4ac2-af6f-bfbf49c293c6" class="xr-section-summary-in" type="checkbox"><label for="section-a005acf9-35b8-4ac2-af6f-bfbf49c293c6" class="xr-section-summary">Indexes: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>chain</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-f3d1e6c6-4a0f-4016-9ed6-77900d21d340" class="xr-index-data-in" type="checkbox"><label for="index-f3d1e6c6-4a0f-4016-9ed6-77900d21d340" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([0, 1, 2, 3], dtype='int64', name='chain'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>draw</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-4dfa51c9-b9d7-453a-8194-4eb0afac6c82" class="xr-index-data-in" type="checkbox"><label for="index-4dfa51c9-b9d7-453a-8194-4eb0afac6c82" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
       ...
       990, 991, 992, 993, 994, 995, 996, 997, 998, 999],
      dtype='int64', name='draw', length=1000))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>obs</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-2faab5d2-aceb-4062-9e38-66afcfb38d67" class="xr-index-data-in" type="checkbox"><label for="index-2faab5d2-aceb-4062-9e38-66afcfb38d67" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
       ...
       890, 891, 892, 893, 894, 895, 896, 897, 898, 899],
      dtype='int64', name='obs', length=900))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>alts_probs</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-2d642994-4ef2-483a-b178-bd4d85d7bf0e" class="xr-index-data-in" type="checkbox"><label for="index-2d642994-4ef2-483a-b178-bd4d85d7bf0e" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index(['ec', 'er', 'gc', 'gr', 'hp'], dtype='object', name='alts_probs'))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-9123d0bc-ebc1-42e9-b8b2-90ae8a3ca233" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-9123d0bc-ebc1-42e9-b8b2-90ae8a3ca233" class="xr-section-summary">Attributes: <span>(2)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2024-06-23T20:32:15.207517+00:00</dd><dt><span>arviz_version :</span></dt><dd>0.18.0</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
            <li class="xr-section-item">
                  <input id="idata_posterior_predictivec32b75d9-f904-4605-8a20-80681f1e9823" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_posterior_predictivec32b75d9-f904-4605-8a20-80681f1e9823" class="xr-section-summary">posterior_predictive</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 29MB
Dimensions:  (chain: 4, draw: 1000, obs: 900)
Coordinates:
  * chain    (chain) int64 32B 0 1 2 3
  * draw     (draw) int64 8kB 0 1 2 3 4 5 6 7 ... 993 994 995 996 997 998 999
  * obs      (obs) int64 7kB 0 1 2 3 4 5 6 7 ... 892 893 894 895 896 897 898 899
Data variables:
    y_cat    (chain, draw, obs) int64 29MB 3 3 2 3 3 4 3 2 2 ... 3 3 3 2 3 3 4 1
Attributes:
    created_at:                 2024-06-23T20:32:21.823805+00:00
    arviz_version:              0.18.0
    inference_library:          pymc
    inference_library_version:  5.15.1</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-88ffcd69-bf6a-4db2-ba4c-d4d02c08ff3a" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-88ffcd69-bf6a-4db2-ba4c-d4d02c08ff3a" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">chain</span>: 4</li><li><span class="xr-has-index">draw</span>: 1000</li><li><span class="xr-has-index">obs</span>: 900</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-819d04f3-092c-451c-8318-fc4cc577908d" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-819d04f3-092c-451c-8318-fc4cc577908d" class="xr-section-summary">Coordinates: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(chain)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3</div><input id="attrs-2d4feda5-25d3-4c53-b99c-6bd496641202" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-2d4feda5-25d3-4c53-b99c-6bd496641202" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-70fadbe6-b3e2-4320-b369-4d8d85752788" class="xr-var-data-in" type="checkbox"><label for="data-70fadbe6-b3e2-4320-b369-4d8d85752788" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0, 1, 2, 3])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 995 996 997 998 999</div><input id="attrs-fb444e25-9570-47f6-97d0-06bc4729e33d" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-fb444e25-9570-47f6-97d0-06bc4729e33d" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-c9a8bb51-0b83-4a93-8c66-c2c9babcd5ea" class="xr-var-data-in" type="checkbox"><label for="data-c9a8bb51-0b83-4a93-8c66-c2c9babcd5ea" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 997, 998, 999])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">obs</span></div><div class="xr-var-dims">(obs)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 895 896 897 898 899</div><input id="attrs-c0a79315-4a4c-48fc-b872-1dcf5df7f1ac" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-c0a79315-4a4c-48fc-b872-1dcf5df7f1ac" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-bf21610c-3ea1-43a6-bcee-96fc3fb4cc3e" class="xr-var-data-in" type="checkbox"><label for="data-bf21610c-3ea1-43a6-bcee-96fc3fb4cc3e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 897, 898, 899])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-5b455972-451b-4df2-99fe-a2b00888c8e1" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-5b455972-451b-4df2-99fe-a2b00888c8e1" class="xr-section-summary">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>y_cat</span></div><div class="xr-var-dims">(chain, draw, obs)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">3 3 2 3 3 4 3 2 ... 3 3 3 2 3 3 4 1</div><input id="attrs-8d80d723-7e6f-4c54-8c8b-341b9e4972e0" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-8d80d723-7e6f-4c54-8c8b-341b9e4972e0" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-f65a9212-00f4-4196-b601-869505a2295d" class="xr-var-data-in" type="checkbox"><label for="data-f65a9212-00f4-4196-b601-869505a2295d" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[3, 3, 2, ..., 2, 0, 3],
        [3, 2, 1, ..., 3, 4, 4],
        [2, 3, 2, ..., 4, 4, 2],
        ...,
        [2, 3, 3, ..., 2, 1, 3],
        [4, 2, 2, ..., 3, 1, 2],
        [1, 2, 2, ..., 2, 3, 3]],

       [[2, 4, 2, ..., 2, 2, 3],
        [4, 3, 3, ..., 3, 3, 3],
        [2, 3, 2, ..., 3, 3, 2],
        ...,
        [3, 2, 0, ..., 0, 0, 2],
        [2, 3, 1, ..., 2, 1, 2],
        [2, 2, 0, ..., 2, 2, 2]],

       [[4, 2, 2, ..., 1, 3, 3],
        [3, 3, 3, ..., 4, 2, 2],
        [3, 3, 3, ..., 2, 3, 3],
        ...,
        [3, 2, 0, ..., 0, 3, 1],
        [2, 1, 2, ..., 2, 3, 2],
        [3, 2, 3, ..., 1, 3, 3]],

       [[4, 3, 3, ..., 2, 3, 3],
        [2, 4, 3, ..., 4, 1, 2],
        [4, 3, 3, ..., 3, 3, 2],
        ...,
        [3, 3, 3, ..., 1, 2, 4],
        [4, 3, 3, ..., 3, 0, 3],
        [3, 1, 3, ..., 3, 4, 1]]])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-23102847-b1e0-4b1d-b73c-8cbe10c644b1" class="xr-section-summary-in" type="checkbox"><label for="section-23102847-b1e0-4b1d-b73c-8cbe10c644b1" class="xr-section-summary">Indexes: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>chain</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-c1c616df-009e-4cc3-a7c1-75103dda60c9" class="xr-index-data-in" type="checkbox"><label for="index-c1c616df-009e-4cc3-a7c1-75103dda60c9" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([0, 1, 2, 3], dtype='int64', name='chain'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>draw</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-f10dd357-88c4-4af2-b998-e9139bbbf420" class="xr-index-data-in" type="checkbox"><label for="index-f10dd357-88c4-4af2-b998-e9139bbbf420" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
       ...
       990, 991, 992, 993, 994, 995, 996, 997, 998, 999],
      dtype='int64', name='draw', length=1000))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>obs</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-7acfdef8-3fa4-4cea-b65d-a0d33c900dab" class="xr-index-data-in" type="checkbox"><label for="index-7acfdef8-3fa4-4cea-b65d-a0d33c900dab" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
       ...
       890, 891, 892, 893, 894, 895, 896, 897, 898, 899],
      dtype='int64', name='obs', length=900))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-399b2c80-080e-4d41-8d16-c140f835d956" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-399b2c80-080e-4d41-8d16-c140f835d956" class="xr-section-summary">Attributes: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2024-06-23T20:32:21.823805+00:00</dd><dt><span>arviz_version :</span></dt><dd>0.18.0</dd><dt><span>inference_library :</span></dt><dd>pymc</dd><dt><span>inference_library_version :</span></dt><dd>5.15.1</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
            <li class="xr-section-item">
                  <input id="idata_log_likelihoodc794511f-552a-4a40-a444-2c57a4091fe0" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_log_likelihoodc794511f-552a-4a40-a444-2c57a4091fe0" class="xr-section-summary">log_likelihood</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 29MB
Dimensions:      (chain: 4, draw: 1000, y_cat_dim_0: 1, y_cat_dim_1: 900)
Coordinates:
  * chain        (chain) int64 32B 0 1 2 3
  * draw         (draw) int64 8kB 0 1 2 3 4 5 6 ... 993 994 995 996 997 998 999
  * y_cat_dim_0  (y_cat_dim_0) int64 8B 0
  * y_cat_dim_1  (y_cat_dim_1) int64 7kB 0 1 2 3 4 5 ... 894 895 896 897 898 899
Data variables:
    y_cat        (chain, draw, y_cat_dim_0, y_cat_dim_1) float64 29MB -1.261 ...
Attributes:
    created_at:     2024-06-23T20:32:15.210389+00:00
    arviz_version:  0.18.0</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-a0a7c637-7a04-4d06-87bf-e9c7db7ccb82" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-a0a7c637-7a04-4d06-87bf-e9c7db7ccb82" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">chain</span>: 4</li><li><span class="xr-has-index">draw</span>: 1000</li><li><span class="xr-has-index">y_cat_dim_0</span>: 1</li><li><span class="xr-has-index">y_cat_dim_1</span>: 900</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-c3be4dfd-724e-4d96-bd43-9b5fc53590df" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-c3be4dfd-724e-4d96-bd43-9b5fc53590df" class="xr-section-summary">Coordinates: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(chain)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3</div><input id="attrs-e4e14eb9-c8b0-4b47-bbc5-54a3df73adc8" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-e4e14eb9-c8b0-4b47-bbc5-54a3df73adc8" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-7de90388-6ed5-464f-bfad-b9892b9648c0" class="xr-var-data-in" type="checkbox"><label for="data-7de90388-6ed5-464f-bfad-b9892b9648c0" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0, 1, 2, 3])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 995 996 997 998 999</div><input id="attrs-ddc5328e-6aa6-43f8-b4b6-88877c217f01" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-ddc5328e-6aa6-43f8-b4b6-88877c217f01" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-1d64bb1d-5c70-4eed-a998-ec23cefe23d8" class="xr-var-data-in" type="checkbox"><label for="data-1d64bb1d-5c70-4eed-a998-ec23cefe23d8" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 997, 998, 999])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">y_cat_dim_0</span></div><div class="xr-var-dims">(y_cat_dim_0)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0</div><input id="attrs-2b888020-08e5-49b0-be37-82a8fccae480" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-2b888020-08e5-49b0-be37-82a8fccae480" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-0df51ac7-ac05-4cfb-bb47-a7caee80a85a" class="xr-var-data-in" type="checkbox"><label for="data-0df51ac7-ac05-4cfb-bb47-a7caee80a85a" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">y_cat_dim_1</span></div><div class="xr-var-dims">(y_cat_dim_1)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 895 896 897 898 899</div><input id="attrs-2c2cc589-370f-420c-83da-643380c3eb53" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-2c2cc589-370f-420c-83da-643380c3eb53" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-6489e3c7-8f4d-44d5-b7d7-00fa3c8b1b3b" class="xr-var-data-in" type="checkbox"><label for="data-6489e3c7-8f4d-44d5-b7d7-00fa3c8b1b3b" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 897, 898, 899])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-5ba81286-89a3-4795-abb6-21e789d26280" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-5ba81286-89a3-4795-abb6-21e789d26280" class="xr-section-summary">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>y_cat</span></div><div class="xr-var-dims">(chain, draw, y_cat_dim_0, y_cat_dim_1)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-1.261 -1.187 ... -1.493 -1.269</div><input id="attrs-20ffb09c-817c-484d-8e4e-46f8834b2083" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-20ffb09c-817c-484d-8e4e-46f8834b2083" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-fba811f2-d363-48ea-9dff-ecaa747f32ad" class="xr-var-data-in" type="checkbox"><label for="data-fba811f2-d363-48ea-9dff-ecaa747f32ad" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[[-1.2612087 , -1.18692092, -1.46673836, ..., -1.44444265,
          -1.48891222, -1.30485813]],

        [[-1.26192523, -1.18781889, -1.46596855, ..., -1.44324653,
          -1.48816503, -1.30414666]],

        [[-1.25619272, -1.16445278, -1.44876958, ..., -1.42865775,
          -1.48677005, -1.27635524]],

        ...,

        [[-1.25606194, -1.15560848, -1.44314675, ..., -1.42458852,
          -1.48873712, -1.26557903]],

        [[-1.26036161, -1.16141909, -1.44246931, ..., -1.4220514 ,
          -1.48744086, -1.26553536]],

        [[-1.2432454 , -1.15168259, -1.46743232, ..., -1.45639165,
          -1.50228702, -1.29804564]]],

...

       [[[-1.25808289, -1.1799529 , -1.46386658, ..., -1.4428013 ,
          -1.4892258 , -1.2997839 ]],

        [[-1.26018275, -1.17702843, -1.45418793, ..., -1.43166875,
          -1.48506219, -1.2867652 ]],

        [[-1.25512316, -1.17290448, -1.4609046 , ..., -1.44114666,
          -1.48966503, -1.29452733]],

        ...,

        [[-1.24190813, -1.14419259, -1.45813717, ..., -1.44711688,
          -1.49875835, -1.28485022]],

        [[-1.23942224, -1.13145002, -1.45020518, ..., -1.441761  ,
          -1.49968331, -1.27142236]],

        [[-1.2465712 , -1.14349955, -1.44688504, ..., -1.43313061,
          -1.49323869, -1.26905606]]]])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-50aaba3d-df00-47d8-a3bf-dc92ed15ff94" class="xr-section-summary-in" type="checkbox"><label for="section-50aaba3d-df00-47d8-a3bf-dc92ed15ff94" class="xr-section-summary">Indexes: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>chain</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-fa8d4be9-d9c0-4ee6-b561-dde1a550f337" class="xr-index-data-in" type="checkbox"><label for="index-fa8d4be9-d9c0-4ee6-b561-dde1a550f337" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([0, 1, 2, 3], dtype='int64', name='chain'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>draw</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-ce41c33b-7180-4ef5-abe4-3aa93ccfc4e4" class="xr-index-data-in" type="checkbox"><label for="index-ce41c33b-7180-4ef5-abe4-3aa93ccfc4e4" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
       ...
       990, 991, 992, 993, 994, 995, 996, 997, 998, 999],
      dtype='int64', name='draw', length=1000))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>y_cat_dim_0</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-ac7e7e79-1a54-4e6a-a11a-918c0bfdccc3" class="xr-index-data-in" type="checkbox"><label for="index-ac7e7e79-1a54-4e6a-a11a-918c0bfdccc3" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([0], dtype='int64', name='y_cat_dim_0'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>y_cat_dim_1</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-5a2c14f3-b4b5-4543-b3e6-8772d35d1a58" class="xr-index-data-in" type="checkbox"><label for="index-5a2c14f3-b4b5-4543-b3e6-8772d35d1a58" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
       ...
       890, 891, 892, 893, 894, 895, 896, 897, 898, 899],
      dtype='int64', name='y_cat_dim_1', length=900))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-9a3ab061-699c-411a-aa7d-1357c6bec832" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-9a3ab061-699c-411a-aa7d-1357c6bec832" class="xr-section-summary">Attributes: <span>(2)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2024-06-23T20:32:15.210389+00:00</dd><dt><span>arviz_version :</span></dt><dd>0.18.0</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
            <li class="xr-section-item">
                  <input id="idata_sample_stats967950e4-c38d-4aeb-b004-9833104fdca6" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_sample_stats967950e4-c38d-4aeb-b004-9833104fdca6" class="xr-section-summary">sample_stats</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 204kB
Dimensions:          (chain: 4, draw: 1000)
Coordinates:
  * chain            (chain) int64 32B 0 1 2 3
  * draw             (draw) int64 8kB 0 1 2 3 4 5 6 ... 994 995 996 997 998 999
Data variables:
    acceptance_rate  (chain, draw) float64 32kB 0.9628 1.0 ... 0.9096 0.8808
    diverging        (chain, draw) bool 4kB False False False ... False False
    energy           (chain, draw) float64 32kB 1.312e+03 ... 1.312e+03
    lp               (chain, draw) float64 32kB 1.311e+03 ... 1.311e+03
    n_steps          (chain, draw) int64 32kB 3 1 7 1 3 7 3 7 ... 7 3 3 3 3 7 3
    step_size        (chain, draw) float64 32kB 0.03082 0.03082 ... 0.0351
    tree_depth       (chain, draw) int64 32kB 2 1 3 1 2 3 2 3 ... 3 2 2 2 2 3 2
Attributes:
    created_at:     2024-06-23T20:32:15.209472+00:00
    arviz_version:  0.18.0</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-b9102c23-45b3-4e01-bd21-9167b461146c" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-b9102c23-45b3-4e01-bd21-9167b461146c" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">chain</span>: 4</li><li><span class="xr-has-index">draw</span>: 1000</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-512980bd-d8b3-4160-bdd4-43ea615dbf71" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-512980bd-d8b3-4160-bdd4-43ea615dbf71" class="xr-section-summary">Coordinates: <span>(2)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(chain)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3</div><input id="attrs-c26e2edd-1655-44f4-9090-a75e37f37598" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-c26e2edd-1655-44f4-9090-a75e37f37598" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-82285747-42af-4e3f-b107-3ac0955e4ceb" class="xr-var-data-in" type="checkbox"><label for="data-82285747-42af-4e3f-b107-3ac0955e4ceb" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0, 1, 2, 3])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 995 996 997 998 999</div><input id="attrs-9ef92869-08a5-4ea8-bcf4-ee28e215a5e9" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-9ef92869-08a5-4ea8-bcf4-ee28e215a5e9" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-dfc6a881-0c03-42fd-a2c4-1c0dc740c46f" class="xr-var-data-in" type="checkbox"><label for="data-dfc6a881-0c03-42fd-a2c4-1c0dc740c46f" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 997, 998, 999])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-6257cd95-3d8f-4e83-aadc-227c9be40fbe" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-6257cd95-3d8f-4e83-aadc-227c9be40fbe" class="xr-section-summary">Data variables: <span>(7)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>acceptance_rate</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.9628 1.0 0.9231 ... 0.9096 0.8808</div><input id="attrs-c2e3133f-709d-45de-90c6-ce8ccdf6d405" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-c2e3133f-709d-45de-90c6-ce8ccdf6d405" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-a53f8133-7e6f-4374-9a46-d78b6c20dc53" class="xr-var-data-in" type="checkbox"><label for="data-a53f8133-7e6f-4374-9a46-d78b6c20dc53" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.96283342, 1.        , 0.9230903 , ..., 0.75914853, 0.76587015,
        0.9716857 ],
       [0.98301043, 0.64214544, 0.71499472, ..., 0.99954378, 0.98732408,
        0.93728333],
       [0.97384869, 0.5090271 , 0.98637995, ..., 0.97621634, 1.        ,
        1.        ],
       [0.95595037, 0.9920607 , 0.95920415, ..., 0.88600583, 0.90960034,
        0.88083658]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>diverging</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">bool</div><div class="xr-var-preview xr-preview">False False False ... False False</div><input id="attrs-ea3d6356-e3f5-4fdb-9dde-e6b6c5b7072b" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-ea3d6356-e3f5-4fdb-9dde-e6b6c5b7072b" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-5a0bcdf2-4de8-445f-abde-9bc062a637d1" class="xr-var-data-in" type="checkbox"><label for="data-5a0bcdf2-4de8-445f-abde-9bc062a637d1" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[False, False, False, ..., False, False, False],
       [False, False, False, ..., False, False, False],
       [False, False, False, ..., False, False, False],
       [False, False, False, ..., False, False, False]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>energy</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">1.312e+03 1.311e+03 ... 1.312e+03</div><input id="attrs-43cf44b6-aaf8-4819-a08a-cf3e70bcdeae" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-43cf44b6-aaf8-4819-a08a-cf3e70bcdeae" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-50fcbf89-882e-4901-ac0f-27cfab8840ee" class="xr-var-data-in" type="checkbox"><label for="data-50fcbf89-882e-4901-ac0f-27cfab8840ee" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[1311.62704271, 1311.40908264, 1312.02358383, ..., 1312.94174785,
        1313.8621048 , 1314.56025091],
       [1311.40789762, 1312.88562855, 1313.431072  , ..., 1309.88449978,
        1310.48997299, 1310.14581203],
       [1310.74492576, 1315.67927381, 1311.61594878, ..., 1313.55932677,
        1313.28207282, 1311.9541163 ],
       [1310.76018534, 1310.87052439, 1310.82664292, ..., 1312.72419099,
        1312.61614047, 1312.07832766]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>lp</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">1.311e+03 1.311e+03 ... 1.311e+03</div><input id="attrs-402cfd5d-5dae-4e71-909c-3d33de71fd10" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-402cfd5d-5dae-4e71-909c-3d33de71fd10" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-911c9808-f8c8-4891-a814-d7104e09e6b4" class="xr-var-data-in" type="checkbox"><label for="data-911c9808-f8c8-4891-a814-d7104e09e6b4" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[1311.37579102, 1311.27521994, 1310.55444545, ..., 1312.52991085,
        1313.54709578, 1312.22538983],
       [1311.04717019, 1311.04717019, 1310.18177297, ..., 1309.86136009,
        1309.84522774, 1309.9889148 ],
       [1310.16298245, 1311.19549703, 1310.93490151, ..., 1313.3683328 ,
        1311.97755372, 1311.60368489],
       [1310.75790973, 1310.26335757, 1310.27104901, ..., 1310.67819214,
        1311.08020188, 1310.81157147]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>n_steps</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">3 1 7 1 3 7 3 7 ... 7 7 3 3 3 3 7 3</div><input id="attrs-1ac2fc27-5baf-468b-b9d2-c68fec990f06" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-1ac2fc27-5baf-468b-b9d2-c68fec990f06" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-09042520-3ac3-47f0-8661-6dcf01980015" class="xr-var-data-in" type="checkbox"><label for="data-09042520-3ac3-47f0-8661-6dcf01980015" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[ 3,  1,  7, ...,  3,  1, 15],
       [ 3,  3,  7, ...,  7,  7,  3],
       [15,  3,  7, ...,  3,  3, 15],
       [ 1,  3,  3, ...,  3,  7,  3]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>step_size</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.03082 0.03082 ... 0.0351 0.0351</div><input id="attrs-0abe9701-3f6f-42e4-a3cd-056257fa5612" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-0abe9701-3f6f-42e4-a3cd-056257fa5612" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-df0baee7-7ae4-4648-8c82-4e24d5f78a53" class="xr-var-data-in" type="checkbox"><label for="data-df0baee7-7ae4-4648-8c82-4e24d5f78a53" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.03081926, 0.03081926, 0.03081926, ..., 0.03081926, 0.03081926,
        0.03081926],
       [0.0387321 , 0.0387321 , 0.0387321 , ..., 0.0387321 , 0.0387321 ,
        0.0387321 ],
       [0.03365488, 0.03365488, 0.03365488, ..., 0.03365488, 0.03365488,
        0.03365488],
       [0.03509999, 0.03509999, 0.03509999, ..., 0.03509999, 0.03509999,
        0.03509999]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>tree_depth</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">2 1 3 1 2 3 2 3 ... 3 3 2 2 2 2 3 2</div><input id="attrs-f409cf99-bc58-4049-b198-ad8dfdf3d045" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-f409cf99-bc58-4049-b198-ad8dfdf3d045" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-ce288288-4d4e-4a4a-bd59-43876680e1a8" class="xr-var-data-in" type="checkbox"><label for="data-ce288288-4d4e-4a4a-bd59-43876680e1a8" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[2, 1, 3, ..., 2, 1, 4],
       [2, 2, 3, ..., 3, 3, 2],
       [4, 2, 3, ..., 2, 2, 4],
       [1, 2, 2, ..., 2, 3, 2]])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-03180c8c-3e29-44dd-bcb8-eacc0f124772" class="xr-section-summary-in" type="checkbox"><label for="section-03180c8c-3e29-44dd-bcb8-eacc0f124772" class="xr-section-summary">Indexes: <span>(2)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>chain</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-b9e813c3-db1f-48ef-9a99-0f3060a79f8c" class="xr-index-data-in" type="checkbox"><label for="index-b9e813c3-db1f-48ef-9a99-0f3060a79f8c" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([0, 1, 2, 3], dtype='int64', name='chain'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>draw</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-a3cb72d0-7de4-43e7-84df-f0f4e1705172" class="xr-index-data-in" type="checkbox"><label for="index-a3cb72d0-7de4-43e7-84df-f0f4e1705172" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
       ...
       990, 991, 992, 993, 994, 995, 996, 997, 998, 999],
      dtype='int64', name='draw', length=1000))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-ed8d6ccc-fd1e-417c-8297-17effdafb02a" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-ed8d6ccc-fd1e-417c-8297-17effdafb02a" class="xr-section-summary">Attributes: <span>(2)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2024-06-23T20:32:15.209472+00:00</dd><dt><span>arviz_version :</span></dt><dd>0.18.0</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
            <li class="xr-section-item">
                  <input id="idata_prior192f9abd-0be8-4869-b68f-bd06384593a2" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_prior192f9abd-0be8-4869-b68f-bd06384593a2" class="xr-section-summary">prior</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 18MB
Dimensions:     (chain: 1, draw: 500, obs: 900, alts_probs: 5)
Coordinates:
  * chain       (chain) int64 8B 0
  * draw        (draw) int64 4kB 0 1 2 3 4 5 6 7 ... 493 494 495 496 497 498 499
  * obs         (obs) int64 7kB 0 1 2 3 4 5 6 7 ... 893 894 895 896 897 898 899
  * alts_probs  (alts_probs) &lt;U2 40B 'ec' 'er' 'gc' 'gr' 'hp'
Data variables:
    beta_ic     (chain, draw) float64 4kB 1.383 -0.07456 ... -0.921 1.762
    beta_oc     (chain, draw) float64 4kB -0.2187 1.131 ... -1.086 -0.03639
    p           (chain, draw, obs, alts_probs) float64 18MB 1.347e-100 ... 0.0
Attributes:
    created_at:                 2024-06-23T20:32:10.756506+00:00
    arviz_version:              0.18.0
    inference_library:          pymc
    inference_library_version:  5.15.1</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-028392a0-9ef0-4342-bb3c-c002a78fe3ac" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-028392a0-9ef0-4342-bb3c-c002a78fe3ac" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">chain</span>: 1</li><li><span class="xr-has-index">draw</span>: 500</li><li><span class="xr-has-index">obs</span>: 900</li><li><span class="xr-has-index">alts_probs</span>: 5</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-feb30cd0-c2a0-4462-8dc6-d45992cea4d6" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-feb30cd0-c2a0-4462-8dc6-d45992cea4d6" class="xr-section-summary">Coordinates: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(chain)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0</div><input id="attrs-1e8f21c6-b543-475e-be7e-08891c7b8967" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-1e8f21c6-b543-475e-be7e-08891c7b8967" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-798a7fc4-d5bf-4d1d-b471-6f881cef590d" class="xr-var-data-in" type="checkbox"><label for="data-798a7fc4-d5bf-4d1d-b471-6f881cef590d" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 495 496 497 498 499</div><input id="attrs-3467d090-f246-4881-a325-096e694f6a45" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-3467d090-f246-4881-a325-096e694f6a45" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-42588a69-d08e-4247-a8b5-e0ea76908179" class="xr-var-data-in" type="checkbox"><label for="data-42588a69-d08e-4247-a8b5-e0ea76908179" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 497, 498, 499])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">obs</span></div><div class="xr-var-dims">(obs)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 895 896 897 898 899</div><input id="attrs-b83aee6b-04fa-4aba-9f18-500ea72b0087" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-b83aee6b-04fa-4aba-9f18-500ea72b0087" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-83d0d074-198c-4c58-8017-880ed039efdd" class="xr-var-data-in" type="checkbox"><label for="data-83d0d074-198c-4c58-8017-880ed039efdd" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 897, 898, 899])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">alts_probs</span></div><div class="xr-var-dims">(alts_probs)</div><div class="xr-var-dtype">&lt;U2</div><div class="xr-var-preview xr-preview">'ec' 'er' 'gc' 'gr' 'hp'</div><input id="attrs-b2bf25cd-8a47-4b69-b618-9c83c4093d43" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-b2bf25cd-8a47-4b69-b618-9c83c4093d43" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-019cb3c8-13db-4623-bcf5-1df8db53bca1" class="xr-var-data-in" type="checkbox"><label for="data-019cb3c8-13db-4623-bcf5-1df8db53bca1" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['ec', 'er', 'gc', 'gr', 'hp'], dtype='&lt;U2')</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-35839596-e0bd-44fe-9ec8-4321cfdf9aa9" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-35839596-e0bd-44fe-9ec8-4321cfdf9aa9" class="xr-section-summary">Data variables: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>beta_ic</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">1.383 -0.07456 ... -0.921 1.762</div><input id="attrs-bf236f93-4932-46fc-95f6-eb7418a048f8" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-bf236f93-4932-46fc-95f6-eb7418a048f8" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-9133cba1-4fac-418e-a0f3-a0e3eb8e8e96" class="xr-var-data-in" type="checkbox"><label for="data-9133cba1-4fac-418e-a0f3-a0e3eb8e8e96" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[ 1.38326650e+00, -7.45587282e-02, -5.81792481e-01,
         1.64583486e+00,  9.81388918e-01,  3.20754793e-01,
        -1.44680278e+00, -2.06025789e-01,  8.64762917e-01,
         1.73868916e+00,  3.60089734e-01,  3.88279399e-01,
         4.46724859e-01, -1.92723685e-01,  3.77030938e-02,
         2.26743914e+00, -1.66789474e-01,  1.26919707e+00,
        -5.12032636e-01, -5.55252577e-01, -4.96782131e-02,
        -2.52394339e-01,  1.42892434e+00,  3.51714532e-01,
        -2.22922874e-01, -3.50169472e-01,  1.97139329e+00,
         7.95475057e-01,  6.25534373e-01,  4.41159488e-01,
        -8.67342839e-01,  5.07451471e-01, -1.94339389e-01,
         7.84437654e-01,  9.00848272e-01, -1.58365931e+00,
        -3.94153497e-01,  4.73934137e-01, -2.32096110e-01,
         1.52679971e+00, -7.33090872e-01,  5.40440435e-02,
         4.20206750e-01,  1.68133009e-01,  8.98569623e-01,
        -1.20163327e+00, -9.75584243e-01, -1.18505918e+00,
         3.22548915e-01, -6.53172821e-01, -2.50655596e+00,
         6.38678217e-01, -1.14182974e+00,  1.16539989e+00,
         1.63830149e+00,  6.32884908e-01, -2.42133428e-01,
         2.01297425e-01, -4.94791176e-02,  3.85060974e-02,
...
        -1.56106162e+00, -2.84616072e-01,  1.08531916e+00,
         4.81523002e-01,  7.11481104e-01, -5.44618716e-01,
        -1.25751968e+00, -6.89922007e-01, -1.68533020e-01,
         1.14727326e-01,  8.37509204e-01,  3.64710178e-01,
         5.81156618e-02, -5.94463594e-02, -4.25593140e-03,
        -5.75202823e-01, -1.94502686e+00, -7.01523024e-01,
         3.64551865e-01, -4.26902836e-01, -8.22513091e-02,
         1.26542226e+00, -2.29849186e+00,  2.77434019e-01,
         5.18548735e-01, -8.32959448e-01,  9.90450125e-01,
         1.65323866e+00, -4.51926171e-01,  1.24054403e+00,
         1.01275885e+00, -1.42925187e+00, -1.12880836e-01,
        -3.48517306e-01, -8.73964461e-01, -4.05496974e-01,
         1.25652380e+00, -2.11422792e-02,  9.51226150e-01,
         1.19009122e+00, -1.09275551e-01,  8.38360828e-01,
         1.77667865e-01, -1.11184601e+00, -2.60523819e-01,
         9.41971128e-01,  1.34351006e+00,  2.35053486e-03,
        -1.24979756e+00, -1.46555611e+00, -9.42550642e-01,
         3.34928240e-01, -1.76595489e+00,  1.86342911e-01,
         2.20608550e-01, -2.34437706e-01,  1.11062114e+00,
        -9.21044778e-01,  1.76173066e+00]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>beta_oc</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-0.2187 1.131 ... -1.086 -0.03639</div><input id="attrs-8f3fc242-dfdf-4d11-9c60-2d74b65c1ee6" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-8f3fc242-dfdf-4d11-9c60-2d74b65c1ee6" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-b880d77d-b229-4559-9af5-4791a941b62e" class="xr-var-data-in" type="checkbox"><label for="data-b880d77d-b229-4559-9af5-4791a941b62e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[-2.18724272e-01,  1.13098028e+00, -9.37282697e-01,
         2.64177807e-01, -1.17734793e+00, -1.37330362e+00,
        -1.73970760e-01, -1.36896541e+00,  3.85066116e-02,
         8.64166726e-01,  1.68653751e+00, -5.45321315e-01,
         1.01895759e+00,  8.90660529e-02,  4.44408281e-01,
         1.96294788e-01,  6.89205806e-01,  1.14307422e+00,
         3.35997470e-01, -1.61744354e+00,  9.89014201e-01,
        -2.36364200e+00, -7.47573088e-01,  1.07466100e+00,
        -2.17134798e+00,  1.29394173e-01, -5.31345888e-01,
         1.02857117e-01,  1.41281542e+00,  2.17402322e+00,
         7.17895189e-01, -7.74930820e-01,  1.24237597e+00,
        -4.65215265e-01,  1.37410741e+00,  8.68770005e-01,
        -2.38616653e-01,  5.33523384e-01, -8.05903979e-01,
        -6.98977110e-01, -1.44637213e+00, -1.09441735e-01,
        -5.03454300e-01,  6.20235572e-01,  4.13557688e-01,
         1.06777670e+00, -5.84416370e-01,  2.17311742e+00,
        -1.42837875e+00,  5.28116978e-01, -4.96708329e-01,
        -6.29428281e-01, -6.06128256e-01,  7.84153504e-01,
         1.53397302e-01, -1.02352567e+00, -3.43940374e-01,
        -3.70735143e-01, -2.21844482e-01,  1.84997223e+00,
...
        -1.21051799e+00, -3.67753776e-01,  1.00004975e+00,
        -1.30402450e-01,  1.08847436e-01, -8.06239420e-01,
         3.04261341e-01, -2.75164749e-01, -5.39020456e-01,
        -1.07610620e-01,  2.18530560e+00,  4.41874710e-01,
        -2.37728559e-01, -4.50805654e-01,  2.72418581e-01,
        -7.38092586e-01, -2.34393681e+00,  5.21358491e-01,
        -1.02342427e+00, -2.27437571e-01,  8.34447225e-01,
         5.25093339e-01, -9.74835311e-01,  1.28344006e+00,
         1.31464981e+00, -1.21745550e-01, -2.18126345e-01,
         2.30982110e-01, -1.40217342e+00,  6.51477656e-01,
         8.27257637e-01, -1.74879594e-01,  1.34584346e+00,
         1.35776443e+00, -1.46789158e+00,  9.23491710e-02,
        -1.54262898e-01,  9.00426851e-01, -9.76272546e-01,
         5.84051037e-01, -7.20015378e-02,  3.90502365e-01,
        -1.00072682e+00,  6.26765863e-01, -6.57189342e-01,
         5.71041199e-01, -4.38164033e-01, -1.44436373e+00,
         4.67760783e-01,  1.38629530e+00,  3.73237264e-01,
        -9.37224147e-01,  1.95161086e-01, -9.65195629e-01,
        -1.61252987e+00,  3.06965268e-01, -1.25784537e-01,
        -1.08614370e+00, -3.63936865e-02]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>p</span></div><div class="xr-var-dims">(chain, draw, obs, alts_probs)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">1.347e-100 1.911e-14 ... 1.0 0.0</div><input id="attrs-23d46628-b313-41d8-abe5-64a313426fa7" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-23d46628-b313-41d8-abe5-64a313426fa7" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-1d1b0360-1468-441f-81f8-0930419f4490" class="xr-var-data-in" type="checkbox"><label for="data-1d1b0360-1468-441f-81f8-0930419f4490" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[[1.34671297e-100, 1.91139328e-014, 2.43947490e-063,
          1.00000000e+000, 0.00000000e+000],
         [9.98040992e-063, 1.00000000e+000, 1.02487442e-070,
          4.07132826e-052, 0.00000000e+000],
         [2.85515600e-112, 1.00000000e+000, 1.30621444e-158,
          1.08048464e-045, 0.00000000e+000],
         ...,
         [2.30156887e-160, 3.08592709e-038, 5.83005298e-165,
          1.00000000e+000, 0.00000000e+000],
         [6.06929797e-204, 9.61695016e-001, 1.99988451e-140,
          3.83049845e-002, 0.00000000e+000],
         [3.26382940e-124, 4.08947632e-044, 4.62453374e-136,
          1.00000000e+000, 0.00000000e+000]],

        [[1.00000000e+000, 1.41883359e-028, 1.25084719e-174,
          2.54756743e-201, 1.13562547e-244],
         [1.00000000e+000, 1.79329481e-020, 3.48460260e-171,
          3.46461278e-172, 1.86502610e-230],
         [1.00000000e+000, 2.02385296e-023, 3.71931404e-131,
          9.58177773e-151, 4.49320481e-193],
...
         [0.00000000e+000, 0.00000000e+000, 0.00000000e+000,
          0.00000000e+000, 1.00000000e+000],
         [0.00000000e+000, 0.00000000e+000, 0.00000000e+000,
          0.00000000e+000, 1.00000000e+000],
         [0.00000000e+000, 0.00000000e+000, 0.00000000e+000,
          0.00000000e+000, 1.00000000e+000]],

        [[1.98431291e-105, 1.00000000e+000, 3.58445356e-095,
          1.78993656e-020, 0.00000000e+000],
         [3.84818059e-076, 1.00000000e+000, 2.71493217e-123,
          1.32300540e-099, 0.00000000e+000],
         [3.51959229e-139, 1.00000000e+000, 5.82198856e-227,
          4.52246690e-086, 0.00000000e+000],
         ...,
         [1.42197003e-168, 3.25818873e-016, 2.21723790e-206,
          1.00000000e+000, 0.00000000e+000],
         [1.12932342e-249, 1.00000000e+000, 1.15561543e-198,
          7.89297474e-029, 0.00000000e+000],
         [2.17119127e-122, 1.05514439e-026, 1.52717246e-173,
          1.00000000e+000, 0.00000000e+000]]]])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-e8ea89a6-4643-497b-9a8c-dce4ca3945ac" class="xr-section-summary-in" type="checkbox"><label for="section-e8ea89a6-4643-497b-9a8c-dce4ca3945ac" class="xr-section-summary">Indexes: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>chain</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-dc15d132-3205-475d-8c76-1e22a17abdac" class="xr-index-data-in" type="checkbox"><label for="index-dc15d132-3205-475d-8c76-1e22a17abdac" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([0], dtype='int64', name='chain'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>draw</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-67b37812-7706-4b6f-9a0b-3963f8797d0a" class="xr-index-data-in" type="checkbox"><label for="index-67b37812-7706-4b6f-9a0b-3963f8797d0a" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
       ...
       490, 491, 492, 493, 494, 495, 496, 497, 498, 499],
      dtype='int64', name='draw', length=500))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>obs</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-05e5bc09-13c0-4472-bbd6-f9d254a4ff01" class="xr-index-data-in" type="checkbox"><label for="index-05e5bc09-13c0-4472-bbd6-f9d254a4ff01" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
       ...
       890, 891, 892, 893, 894, 895, 896, 897, 898, 899],
      dtype='int64', name='obs', length=900))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>alts_probs</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-cd8b0740-faf4-43e6-846a-9e194ad38b4d" class="xr-index-data-in" type="checkbox"><label for="index-cd8b0740-faf4-43e6-846a-9e194ad38b4d" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index(['ec', 'er', 'gc', 'gr', 'hp'], dtype='object', name='alts_probs'))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-c08b3934-25fc-42d4-9d16-3e8f81c02a57" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-c08b3934-25fc-42d4-9d16-3e8f81c02a57" class="xr-section-summary">Attributes: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2024-06-23T20:32:10.756506+00:00</dd><dt><span>arviz_version :</span></dt><dd>0.18.0</dd><dt><span>inference_library :</span></dt><dd>pymc</dd><dt><span>inference_library_version :</span></dt><dd>5.15.1</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
            <li class="xr-section-item">
                  <input id="idata_prior_predictivec31f33e2-b45b-4129-92c4-3c87cf0753c1" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_prior_predictivec31f33e2-b45b-4129-92c4-3c87cf0753c1" class="xr-section-summary">prior_predictive</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 4MB
Dimensions:  (chain: 1, draw: 500, obs: 900)
Coordinates:
  * chain    (chain) int64 8B 0
  * draw     (draw) int64 4kB 0 1 2 3 4 5 6 7 ... 493 494 495 496 497 498 499
  * obs      (obs) int64 7kB 0 1 2 3 4 5 6 7 ... 892 893 894 895 896 897 898 899
Data variables:
    y_cat    (chain, draw, obs) int64 4MB 3 1 1 2 1 3 3 3 3 ... 1 1 1 3 1 3 1 3
Attributes:
    created_at:                 2024-06-23T20:32:10.758790+00:00
    arviz_version:              0.18.0
    inference_library:          pymc
    inference_library_version:  5.15.1</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-dddde8cb-532f-4205-a3a4-92d82b735ead" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-dddde8cb-532f-4205-a3a4-92d82b735ead" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">chain</span>: 1</li><li><span class="xr-has-index">draw</span>: 500</li><li><span class="xr-has-index">obs</span>: 900</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-fbde4598-5499-48d8-b3b5-2728e927de50" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-fbde4598-5499-48d8-b3b5-2728e927de50" class="xr-section-summary">Coordinates: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(chain)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0</div><input id="attrs-936ba333-0af9-4991-829f-3ea686dc03c1" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-936ba333-0af9-4991-829f-3ea686dc03c1" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-abe1eb47-4dde-4138-bd4a-22bfadb83754" class="xr-var-data-in" type="checkbox"><label for="data-abe1eb47-4dde-4138-bd4a-22bfadb83754" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 495 496 497 498 499</div><input id="attrs-e048e226-8c07-4781-9d72-a464cf09ed46" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-e048e226-8c07-4781-9d72-a464cf09ed46" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-8a9baa64-31d8-4d26-b47a-50474eb341f4" class="xr-var-data-in" type="checkbox"><label for="data-8a9baa64-31d8-4d26-b47a-50474eb341f4" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 497, 498, 499])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">obs</span></div><div class="xr-var-dims">(obs)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 895 896 897 898 899</div><input id="attrs-0a34033f-ca32-4d0d-ba83-7513d312d3b6" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-0a34033f-ca32-4d0d-ba83-7513d312d3b6" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-dd35074b-d46c-4245-a6a3-aa57fdfb634d" class="xr-var-data-in" type="checkbox"><label for="data-dd35074b-d46c-4245-a6a3-aa57fdfb634d" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 897, 898, 899])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-851528a2-1947-4674-aabf-b549399bb005" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-851528a2-1947-4674-aabf-b549399bb005" class="xr-section-summary">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>y_cat</span></div><div class="xr-var-dims">(chain, draw, obs)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">3 1 1 2 1 3 3 3 ... 1 1 1 3 1 3 1 3</div><input id="attrs-4441ad12-0834-449a-9112-939e0dc32be1" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-4441ad12-0834-449a-9112-939e0dc32be1" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-265f81a0-c853-45eb-89d9-e2c11eece11f" class="xr-var-data-in" type="checkbox"><label for="data-265f81a0-c853-45eb-89d9-e2c11eece11f" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[3, 1, 1, ..., 3, 3, 3],
        [0, 0, 0, ..., 0, 0, 0],
        [4, 4, 4, ..., 4, 4, 4],
        ...,
        [3, 1, 1, ..., 3, 1, 3],
        [4, 4, 4, ..., 4, 4, 4],
        [1, 1, 1, ..., 3, 1, 3]]])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-686c478b-736a-4cdc-8c59-265884946f9b" class="xr-section-summary-in" type="checkbox"><label for="section-686c478b-736a-4cdc-8c59-265884946f9b" class="xr-section-summary">Indexes: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>chain</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-50e43a1d-144d-4d59-96f4-32f77fb83e10" class="xr-index-data-in" type="checkbox"><label for="index-50e43a1d-144d-4d59-96f4-32f77fb83e10" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([0], dtype='int64', name='chain'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>draw</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-b8f75f26-0b4f-44b3-a5cd-fbc9de8b8a15" class="xr-index-data-in" type="checkbox"><label for="index-b8f75f26-0b4f-44b3-a5cd-fbc9de8b8a15" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
       ...
       490, 491, 492, 493, 494, 495, 496, 497, 498, 499],
      dtype='int64', name='draw', length=500))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>obs</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-d4d6a77c-9920-4b57-a576-0da2ff4cf3cf" class="xr-index-data-in" type="checkbox"><label for="index-d4d6a77c-9920-4b57-a576-0da2ff4cf3cf" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
       ...
       890, 891, 892, 893, 894, 895, 896, 897, 898, 899],
      dtype='int64', name='obs', length=900))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-55df647c-3249-43ab-9cd9-21609e68623a" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-55df647c-3249-43ab-9cd9-21609e68623a" class="xr-section-summary">Attributes: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2024-06-23T20:32:10.758790+00:00</dd><dt><span>arviz_version :</span></dt><dd>0.18.0</dd><dt><span>inference_library :</span></dt><dd>pymc</dd><dt><span>inference_library_version :</span></dt><dd>5.15.1</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
            <li class="xr-section-item">
                  <input id="idata_observed_dataff3e5248-ed40-4de5-85dc-c51656b65891" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_observed_dataff3e5248-ed40-4de5-85dc-c51656b65891" class="xr-section-summary">observed_data</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 14kB
Dimensions:  (obs: 900)
Coordinates:
  * obs      (obs) int64 7kB 0 1 2 3 4 5 6 7 ... 892 893 894 895 896 897 898 899
Data variables:
    y_cat    (obs) int64 7kB 2 2 2 1 1 2 2 2 2 2 2 2 ... 2 2 2 2 2 2 1 2 2 2 2 2
Attributes:
    created_at:                 2024-06-23T20:32:10.759288+00:00
    arviz_version:              0.18.0
    inference_library:          pymc
    inference_library_version:  5.15.1</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-6173df40-5b3b-414a-bed5-f0bbdf7e1a76" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-6173df40-5b3b-414a-bed5-f0bbdf7e1a76" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">obs</span>: 900</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-be9db276-f21b-49a9-8038-46c0749b67c5" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-be9db276-f21b-49a9-8038-46c0749b67c5" class="xr-section-summary">Coordinates: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">obs</span></div><div class="xr-var-dims">(obs)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 895 896 897 898 899</div><input id="attrs-4ccb3487-4c51-4b5d-a726-9f7c3ba8410d" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-4ccb3487-4c51-4b5d-a726-9f7c3ba8410d" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-6fdcb92e-8ade-461a-b018-32603461b346" class="xr-var-data-in" type="checkbox"><label for="data-6fdcb92e-8ade-461a-b018-32603461b346" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 897, 898, 899])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-2d84cca6-1668-4b68-9045-ab4d85f4df9b" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-2d84cca6-1668-4b68-9045-ab4d85f4df9b" class="xr-section-summary">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>y_cat</span></div><div class="xr-var-dims">(obs)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">2 2 2 1 1 2 2 2 ... 2 2 1 2 2 2 2 2</div><input id="attrs-39ae0f54-d9b3-4df8-9001-c13f46c079a0" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-39ae0f54-d9b3-4df8-9001-c13f46c079a0" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-874fc936-04e2-4e55-baa8-643596d244a1" class="xr-var-data-in" type="checkbox"><label for="data-874fc936-04e2-4e55-baa8-643596d244a1" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([2, 2, 2, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, 3, 4, 4, 1, 2, 0, 3,
       2, 4, 2, 3, 2, 0, 0, 2, 2, 3, 3, 2, 2, 2, 3, 2, 2, 1, 2, 3, 2, 2,
       2, 2, 1, 2, 2, 2, 2, 2, 2, 2, 4, 3, 2, 4, 2, 2, 2, 2, 2, 2, 3, 2,
       2, 2, 3, 2, 3, 2, 1, 4, 1, 2, 2, 2, 1, 3, 2, 2, 2, 4, 3, 2, 2, 2,
       2, 2, 4, 2, 2, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 0, 2, 2, 2, 4, 2,
       2, 2, 4, 1, 0, 2, 2, 2, 2, 2, 3, 1, 2, 2, 2, 2, 2, 2, 2, 3, 2, 3,
       0, 3, 2, 3, 1, 0, 2, 2, 3, 2, 1, 4, 4, 3, 2, 3, 2, 2, 4, 3, 4, 2,
       2, 2, 2, 2, 2, 0, 2, 2, 2, 0, 2, 0, 2, 2, 2, 0, 1, 2, 2, 3, 2, 2,
       2, 2, 3, 3, 1, 2, 2, 2, 2, 2, 2, 3, 2, 2, 2, 4, 2, 2, 2, 2, 2, 2,
       2, 2, 0, 2, 2, 3, 2, 2, 2, 2, 2, 2, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2,
       2, 0, 2, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 3, 2, 0, 2, 2, 2, 2,
       2, 3, 2, 2, 3, 2, 1, 0, 0, 4, 2, 2, 2, 2, 2, 1, 2, 3, 3, 3, 2, 2,
       2, 3, 2, 2, 2, 2, 2, 2, 3, 2, 2, 2, 2, 2, 3, 2, 2, 2, 4, 0, 2, 1,
       3, 1, 2, 3, 2, 3, 0, 0, 4, 2, 2, 2, 2, 2, 0, 1, 2, 2, 2, 2, 2, 2,
       2, 1, 1, 2, 1, 3, 1, 2, 4, 2, 2, 2, 2, 2, 4, 2, 2, 2, 2, 3, 2, 2,
       2, 2, 1, 3, 2, 3, 2, 2, 2, 4, 4, 2, 3, 3, 3, 1, 2, 2, 2, 2, 2, 2,
       4, 2, 2, 2, 4, 2, 0, 2, 3, 4, 2, 2, 2, 2, 2, 2, 2, 4, 0, 2, 1, 3,
       0, 1, 2, 2, 2, 2, 2, 1, 2, 4, 3, 2, 2, 2, 2, 3, 2, 2, 2, 2, 2, 2,
       2, 0, 2, 2, 2, 2, 2, 2, 1, 2, 2, 1, 0, 3, 0, 2, 2, 3, 3, 2, 1, 0,
       2, 1, 2, 2, 2, 2, 3, 0, 2, 2, 2, 2, 2, 3, 2, 2, 2, 2, 2, 2, 2, 0,
...
       3, 2, 1, 2, 3, 2, 3, 3, 3, 2, 0, 2, 2, 3, 1, 2, 0, 1, 3, 2, 1, 0,
       2, 3, 0, 0, 1, 3, 1, 2, 2, 2, 2, 4, 2, 1, 2, 2, 2, 2, 1, 2, 2, 3,
       3, 2, 2, 2, 1, 2, 4, 2, 3, 0, 2, 1, 2, 1, 2, 2, 3, 2, 2, 2, 2, 3,
       2, 2, 2, 2, 2, 1, 3, 2, 3, 2, 2, 2, 2, 3, 2, 2, 2, 1, 2, 0, 2, 2,
       2, 3, 2, 3, 2, 0, 2, 3, 3, 2, 2, 3, 2, 2, 2, 2, 2, 2, 2, 4, 3, 2,
       3, 2, 2, 2, 2, 0, 2, 2, 3, 0, 2, 1, 1, 3, 2, 2, 2, 2, 3, 0, 3, 2,
       2, 2, 2, 2, 2, 2, 2, 2, 4, 0, 4, 2, 1, 2, 1, 2, 2, 0, 2, 2, 1, 2,
       3, 2, 3, 3, 2, 2, 4, 1, 2, 2, 2, 2, 4, 4, 1, 2, 2, 2, 1, 2, 1, 3,
       3, 0, 4, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, 2, 2, 2, 3, 4, 2, 1, 1, 0,
       2, 2, 2, 2, 1, 1, 3, 2, 2, 2, 2, 2, 2, 2, 2, 0, 2, 3, 0, 2, 2, 2,
       1, 2, 3, 4, 2, 1, 2, 3, 2, 3, 2, 2, 2, 1, 2, 1, 2, 2, 2, 2, 2, 2,
       2, 2, 2, 4, 2, 2, 2, 2, 2, 1, 2, 0, 2, 2, 3, 0, 3, 2, 2, 2, 3, 3,
       2, 3, 2, 2, 2, 2, 2, 1, 4, 3, 2, 2, 4, 0, 3, 2, 1, 1, 2, 2, 2, 2,
       0, 2, 2, 0, 2, 3, 2, 2, 2, 2, 3, 3, 2, 2, 2, 3, 2, 2, 2, 1, 4, 0,
       2, 2, 2, 2, 2, 2, 2, 1, 4, 2, 2, 0, 2, 1, 2, 2, 0, 2, 3, 2, 2, 3,
       3, 4, 2, 3, 2, 0, 2, 3, 2, 4, 3, 3, 2, 2, 2, 1, 2, 2, 1, 2, 2, 3,
       0, 2, 2, 3, 2, 2, 1, 2, 3, 2, 2, 2, 2, 4, 1, 2, 2, 2, 2, 2, 3, 2,
       1, 2, 1, 0, 2, 2, 2, 2, 2, 2, 2, 3, 2, 3, 0, 2, 1, 2, 2, 2, 2, 2,
       1, 1, 2, 2, 2, 2, 2, 0, 2, 2, 2, 2, 2, 1, 3, 2, 2, 4, 4, 2, 2, 2,
       1, 2, 2, 2, 2, 2, 0, 2, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-3bbc59f3-7df2-40b1-a457-9d5e5e892051" class="xr-section-summary-in" type="checkbox"><label for="section-3bbc59f3-7df2-40b1-a457-9d5e5e892051" class="xr-section-summary">Indexes: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>obs</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-581686d6-8ef3-4a83-a730-9c36d79110cb" class="xr-index-data-in" type="checkbox"><label for="index-581686d6-8ef3-4a83-a730-9c36d79110cb" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
       ...
       890, 891, 892, 893, 894, 895, 896, 897, 898, 899],
      dtype='int64', name='obs', length=900))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-d0709ed4-ac25-41b0-9ca0-2dfbb6ec2f22" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-d0709ed4-ac25-41b0-9ca0-2dfbb6ec2f22" class="xr-section-summary">Attributes: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2024-06-23T20:32:10.759288+00:00</dd><dt><span>arviz_version :</span></dt><dd>0.18.0</dd><dt><span>inference_library :</span></dt><dd>pymc</dd><dt><span>inference_library_version :</span></dt><dd>5.15.1</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
              </ul>
            </div>
            <style> /* CSS stylesheet for displaying InferenceData objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-sections.group-sections {
  grid-template-columns: auto;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
.xr-wrap{width:700px!important;} </style>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [7]:</pre></div><div id="cell-8" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>summaries <span class="op">=</span> az.summary(idata_m1, var_names<span class="op">=</span>[<span class="st">"beta_ic"</span>, <span class="st">"beta_oc"</span>])</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>summaries <span class="co"># results are sus because beta_ic and beta_oc should both be negative</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">sd</th>
<th data-quarto-table-cell-role="th">hdi_3%</th>
<th data-quarto-table-cell-role="th">hdi_97%</th>
<th data-quarto-table-cell-role="th">mcse_mean</th>
<th data-quarto-table-cell-role="th">mcse_sd</th>
<th data-quarto-table-cell-role="th">ess_bulk</th>
<th data-quarto-table-cell-role="th">ess_tail</th>
<th data-quarto-table-cell-role="th">r_hat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">beta_ic</td>
<td>0.002</td>
<td>0.0</td>
<td>0.002</td>
<td>0.002</td>
<td>0.0</td>
<td>0.0</td>
<td>1802.0</td>
<td>2209.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">beta_oc</td>
<td>-0.004</td>
<td>0.0</td>
<td>-0.005</td>
<td>-0.004</td>
<td>0.0</td>
<td>0.0</td>
<td>983.0</td>
<td>1241.0</td>
<td>1.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [8]:</pre></div><div id="cell-9" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">## marginal rate of substitution for a reduction in installation costs</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>post <span class="op">=</span> az.extract(idata_m1)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>substitution_rate <span class="op">=</span> post[<span class="st">"beta_oc"</span>] <span class="op">/</span> post[<span class="st">"beta_ic"</span>]</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>substitution_rate.mean().item()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>-2.211196691253724</code></pre>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [9]:</pre></div><div id="cell-10" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">10</span>))</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>ax.hist(</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    substitution_rate,</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    bins<span class="op">=</span><span class="dv">30</span>,</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    ec<span class="op">=</span><span class="st">"black"</span>,</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Uncertainty in Marginal Rate of Substitution </span><span class="ch">\n</span><span class="st"> Operating Costs / Installation Costs"</span>)<span class="op">;</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div class="">
<figure class="figure">
<p class=""><a href="example_discretechoice_files/figure-html/cell-10-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="example_discretechoice_files/figure-html/cell-10-output-1.png" width="2011" height="1011" class="figure-img"></a></p>
</figure>
</div>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [10]:</pre></div><div id="cell-11" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>idata_m1[<span class="st">"posterior"</span>][<span class="st">"p"</span>].mean(dim<span class="op">=</span>[<span class="st">"chain"</span>, <span class="st">"draw"</span>, <span class="st">"obs"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.DataArray 'p' (alts_probs: 5)&gt; Size: 40B
array([0.08432415, 0.13772203, 0.26912233, 0.38199249, 0.12683901])
Coordinates:
  * alts_probs  (alts_probs) &lt;U2 40B 'ec' 'er' 'gc' 'gr' 'hp'</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.DataArray</div><div class="xr-array-name">'p'</div><ul class="xr-dim-list"><li><span class="xr-has-index">alts_probs</span>: 5</li></ul></div><ul class="xr-sections"><li class="xr-section-item"><div class="xr-array-wrap"><input id="section-4d39ca9b-73b7-46f7-9db5-851ae81b5b3e" class="xr-array-in" type="checkbox" checked=""><label for="section-4d39ca9b-73b7-46f7-9db5-851ae81b5b3e" title="Show/hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-array-preview xr-preview"><span>0.08432 0.1377 0.2691 0.382 0.1268</span></div><div class="xr-array-data"><pre>array([0.08432415, 0.13772203, 0.26912233, 0.38199249, 0.12683901])</pre></div></div></li><li class="xr-section-item"><input id="section-487cf58a-365e-4a9d-8fb3-0a750ae48be1" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-487cf58a-365e-4a9d-8fb3-0a750ae48be1" class="xr-section-summary">Coordinates: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">alts_probs</span></div><div class="xr-var-dims">(alts_probs)</div><div class="xr-var-dtype">&lt;U2</div><div class="xr-var-preview xr-preview">'ec' 'er' 'gc' 'gr' 'hp'</div><input id="attrs-6257bad0-b347-4d3f-b9b3-f26e894c4a26" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-6257bad0-b347-4d3f-b9b3-f26e894c4a26" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-1a30bf30-d9d6-4aed-a622-b1f95c88e249" class="xr-var-data-in" type="checkbox"><label for="data-1a30bf30-d9d6-4aed-a622-b1f95c88e249" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['ec', 'er', 'gc', 'gr', 'hp'], dtype='&lt;U2')</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-75ad4825-16c7-42a8-9e37-8040118bb88b" class="xr-section-summary-in" type="checkbox"><label for="section-75ad4825-16c7-42a8-9e37-8040118bb88b" class="xr-section-summary">Indexes: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>alts_probs</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-9736d760-980d-4ba4-bcb1-2a1ab9358698" class="xr-index-data-in" type="checkbox"><label for="index-9736d760-980d-4ba4-bcb1-2a1ab9358698" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index(['ec', 'er', 'gc', 'gr', 'hp'], dtype='object', name='alts_probs'))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-a755e6f5-478e-4d07-a82f-97efc025ea3a" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-a755e6f5-478e-4d07-a82f-97efc025ea3a" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [11]:</pre></div><div id="cell-12" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">10</span>))</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> axs[<span class="dv">0</span>]</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> wide_heating_df.groupby(<span class="st">"depvar"</span>)[<span class="st">"idcase"</span>].count()</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>predicted_shares <span class="op">=</span> idata_m1[<span class="st">"posterior"</span>][<span class="st">"p"</span>].mean(dim<span class="op">=</span>[<span class="st">"chain"</span>, <span class="st">"draw"</span>, <span class="st">"obs"</span>])</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>ci_lb <span class="op">=</span> idata_m1[<span class="st">"posterior"</span>][<span class="st">"p"</span>].quantile(<span class="fl">0.025</span>, dim<span class="op">=</span>[<span class="st">"chain"</span>, <span class="st">"draw"</span>, <span class="st">"obs"</span>])</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>ci_ub <span class="op">=</span> idata_m1[<span class="st">"posterior"</span>][<span class="st">"p"</span>].quantile(<span class="fl">0.975</span>, dim<span class="op">=</span>[<span class="st">"chain"</span>, <span class="st">"draw"</span>, <span class="st">"obs"</span>])</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>ax.scatter(ci_lb, [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>, <span class="st">"hp"</span>], color<span class="op">=</span><span class="st">"k"</span>, s<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>ax.scatter(ci_ub, [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>, <span class="st">"hp"</span>], color<span class="op">=</span><span class="st">"k"</span>, s<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>ax.scatter(</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    counts <span class="op">/</span> counts.<span class="bu">sum</span>(),</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>, <span class="st">"hp"</span>],</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    label<span class="op">=</span><span class="st">"Observed Shares"</span>,</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"red"</span>,</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    s<span class="op">=</span><span class="dv">100</span>,</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>ax.hlines(</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>, <span class="st">"hp"</span>], ci_lb, ci_ub, label<span class="op">=</span><span class="st">"Predicted 95% Interval"</span>, color<span class="op">=</span><span class="st">"black"</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Observed V Predicted Shares"</span>)</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>az.plot_ppc(idata_m1, ax<span class="op">=</span>axs[<span class="dv">1</span>])</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>].set_title(<span class="st">"Posterior Predictive Checks"</span>)</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Shares"</span>)</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Heating System"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div class="">
<figure class="figure">
<p class=""><a href="example_discretechoice_files/figure-html/cell-12-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="example_discretechoice_files/figure-html/cell-12-output-1.png" width="2011" height="1011" class="figure-img"></a></p>
</figure>
</div>
</div>
</div></div>
<div id="cell-13" class="cell markdown">
<section id="getting-a-better-fit" class="level1">
<h1>Getting a better fit</h1>
<p>You can improve the fit by adding a good-specific intercept – intuitively this should allow you to match the observed frequencies</p>
</section>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [12]:</pre></div><div id="cell-14" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> wide_heating_df.shape[<span class="dv">0</span>]</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>observed <span class="op">=</span> pd.Categorical(wide_heating_df[<span class="st">"depvar"</span>]).codes</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>coords <span class="op">=</span> {</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"alts_intercepts"</span>: [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>],</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"alts_probs"</span>: [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>, <span class="st">"hp"</span>],</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"obs"</span>: <span class="bu">range</span>(N),</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> pm.Model(coords<span class="op">=</span>coords) <span class="im">as</span> model_2:</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    beta_ic <span class="op">=</span> pm.Normal(<span class="st">"beta_ic"</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>    beta_oc <span class="op">=</span> pm.Normal(<span class="st">"beta_oc"</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    alphas <span class="op">=</span> pm.Normal(<span class="st">"alpha"</span>, <span class="dv">0</span>, <span class="dv">1</span>, dims<span class="op">=</span><span class="st">"alts_intercepts"</span>)</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">## Construct Utility matrix and Pivot using an intercept per alternative</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>    u0 <span class="op">=</span> alphas[<span class="dv">0</span>] <span class="op">+</span> beta_ic <span class="op">*</span> wide_heating_df[<span class="st">"ic.ec"</span>] <span class="op">+</span> beta_oc <span class="op">*</span> wide_heating_df[<span class="st">"oc.ec"</span>]</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>    u1 <span class="op">=</span> alphas[<span class="dv">1</span>] <span class="op">+</span> beta_ic <span class="op">*</span> wide_heating_df[<span class="st">"ic.er"</span>] <span class="op">+</span> beta_oc <span class="op">*</span> wide_heating_df[<span class="st">"oc.er"</span>]</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>    u2 <span class="op">=</span> alphas[<span class="dv">2</span>] <span class="op">+</span> beta_ic <span class="op">*</span> wide_heating_df[<span class="st">"ic.gc"</span>] <span class="op">+</span> beta_oc <span class="op">*</span> wide_heating_df[<span class="st">"oc.gc"</span>]</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>    u3 <span class="op">=</span> alphas[<span class="dv">3</span>] <span class="op">+</span> beta_ic <span class="op">*</span> wide_heating_df[<span class="st">"ic.gr"</span>] <span class="op">+</span> beta_oc <span class="op">*</span> wide_heating_df[<span class="st">"oc.gr"</span>]</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>    u4 <span class="op">=</span> np.zeros(N)  <span class="co"># Outside Good</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>    s <span class="op">=</span> pm.math.stack([u0, u1, u2, u3, u4]).T</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">## Apply Softmax Transform</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>    p_ <span class="op">=</span> pm.Deterministic(<span class="st">"p"</span>, pm.math.softmax(s, axis<span class="op">=</span><span class="dv">1</span>), dims<span class="op">=</span>(<span class="st">"obs"</span>, <span class="st">"alts_probs"</span>))</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>    <span class="co">## Likelihood</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>    choice_obs <span class="op">=</span> pm.Categorical(<span class="st">"y_cat"</span>, p<span class="op">=</span>p_, observed<span class="op">=</span>observed, dims<span class="op">=</span><span class="st">"obs"</span>)</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>    idata_m2 <span class="op">=</span> pm.sample_prior_predictive()</span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>    idata_m2.extend(</span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>        pm.sample(nuts_sampler<span class="op">=</span><span class="st">"numpyro"</span>, idata_kwargs<span class="op">=</span>{<span class="st">"log_likelihood"</span>: <span class="va">True</span>}, random_seed<span class="op">=</span><span class="dv">103</span>)</span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>    idata_m2.extend(pm.sample_posterior_predictive(idata_m2))</span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a>pm.model_to_graphviz(model_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Sampling: [alpha, beta_ic, beta_oc, y_cat]</code></pre>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"0b82f4a46a8f421a8f51e663c1c789c4","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"b79a6eb2e6154ca2ad2354ba8dc87162","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"15cf230c6baa418d9d33383230068dc1","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"bff088d2c61a48a3893f6cbec1cc550d","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Sampling: [y_cat]</code></pre>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"243b25ca2534419bad2c7e20f5919582","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="12">
<div class="">
<figure class="figure">
<p class=""><a href="example_discretechoice_files/figure-html/cell-13-output-10.svg" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="example_discretechoice_files/figure-html/cell-13-output-10.svg" class="img-fluid figure-img"></a></p>
</figure>
</div>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [13]:</pre></div><div id="cell-15" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>az.summary(idata_m2, var_names<span class="op">=</span>[<span class="st">"beta_ic"</span>, <span class="st">"beta_oc"</span>, <span class="st">"alpha"</span>])</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># model is still terrible, installation costs and operational costs are meaningless, it's all about the intercepts</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">sd</th>
<th data-quarto-table-cell-role="th">hdi_3%</th>
<th data-quarto-table-cell-role="th">hdi_97%</th>
<th data-quarto-table-cell-role="th">mcse_mean</th>
<th data-quarto-table-cell-role="th">mcse_sd</th>
<th data-quarto-table-cell-role="th">ess_bulk</th>
<th data-quarto-table-cell-role="th">ess_tail</th>
<th data-quarto-table-cell-role="th">r_hat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">beta_ic</td>
<td>0.001</td>
<td>0.000</td>
<td>-0.000</td>
<td>0.002</td>
<td>0.000</td>
<td>0.000</td>
<td>1324.0</td>
<td>1904.0</td>
<td>1.00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">beta_oc</td>
<td>-0.003</td>
<td>0.001</td>
<td>-0.005</td>
<td>-0.001</td>
<td>0.000</td>
<td>0.000</td>
<td>1337.0</td>
<td>1785.0</td>
<td>1.00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">alpha[ec]</td>
<td>1.063</td>
<td>0.513</td>
<td>0.087</td>
<td>2.054</td>
<td>0.017</td>
<td>0.012</td>
<td>914.0</td>
<td>1150.0</td>
<td>1.00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">alpha[er]</td>
<td>1.102</td>
<td>0.491</td>
<td>0.135</td>
<td>2.017</td>
<td>0.017</td>
<td>0.012</td>
<td>856.0</td>
<td>900.0</td>
<td>1.01</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">alpha[gc]</td>
<td>2.397</td>
<td>0.320</td>
<td>1.826</td>
<td>3.019</td>
<td>0.011</td>
<td>0.008</td>
<td>874.0</td>
<td>1002.0</td>
<td>1.01</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">alpha[gr]</td>
<td>0.760</td>
<td>0.385</td>
<td>0.036</td>
<td>1.448</td>
<td>0.012</td>
<td>0.009</td>
<td>957.0</td>
<td>1124.0</td>
<td>1.01</td>
</tr>
</tbody>
</table>

</div>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [14]:</pre></div><div id="cell-16" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">10</span>))</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> axs[<span class="dv">0</span>]</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> wide_heating_df.groupby(<span class="st">"depvar"</span>)[<span class="st">"idcase"</span>].count()</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>predicted_shares <span class="op">=</span> idata_m2[<span class="st">"posterior"</span>][<span class="st">"p"</span>].mean(dim<span class="op">=</span>[<span class="st">"chain"</span>, <span class="st">"draw"</span>, <span class="st">"obs"</span>])</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>ci_lb <span class="op">=</span> idata_m2[<span class="st">"posterior"</span>][<span class="st">"p"</span>].quantile(<span class="fl">0.025</span>, dim<span class="op">=</span>[<span class="st">"chain"</span>, <span class="st">"draw"</span>, <span class="st">"obs"</span>])</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>ci_ub <span class="op">=</span> idata_m2[<span class="st">"posterior"</span>][<span class="st">"p"</span>].quantile(<span class="fl">0.975</span>, dim<span class="op">=</span>[<span class="st">"chain"</span>, <span class="st">"draw"</span>, <span class="st">"obs"</span>])</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>ax.scatter(ci_lb, [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>, <span class="st">"hp"</span>], color<span class="op">=</span><span class="st">"k"</span>, s<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>ax.scatter(ci_ub, [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>, <span class="st">"hp"</span>], color<span class="op">=</span><span class="st">"k"</span>, s<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>ax.scatter(</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    counts <span class="op">/</span> counts.<span class="bu">sum</span>(),</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>, <span class="st">"hp"</span>],</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>    label<span class="op">=</span><span class="st">"Observed Shares"</span>,</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"red"</span>,</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    s<span class="op">=</span><span class="dv">100</span>,</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>ax.hlines(</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>, <span class="st">"hp"</span>], ci_lb, ci_ub, label<span class="op">=</span><span class="st">"Predicted 95% Interval"</span>, color<span class="op">=</span><span class="st">"black"</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Observed V Predicted Shares"</span>)</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>az.plot_ppc(idata_m2, ax<span class="op">=</span>axs[<span class="dv">1</span>])</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>].set_title(<span class="st">"Posterior Predictive Checks"</span>)</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Shares"</span>)</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Heating System"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div class="">
<figure class="figure">
<p class=""><a href="example_discretechoice_files/figure-html/cell-15-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="example_discretechoice_files/figure-html/cell-15-output-1.png" width="2011" height="1011" class="figure-img"></a></p>
</figure>
</div>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [15]:</pre></div><div id="cell-17" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">## marginal rate of substitution for a reduction in installation costs</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>post <span class="op">=</span> az.extract(idata_m2)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>substitution_rate <span class="op">=</span> post[<span class="st">"beta_oc"</span>] <span class="op">/</span> post[<span class="st">"beta_ic"</span>]</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>substitution_rate.mean().item()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>-11.215830921463027</code></pre>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [16]:</pre></div><div id="cell-18" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">10</span>))</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>ax.hist(</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    substitution_rate,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    bins<span class="op">=</span><span class="dv">30</span>,</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    ec<span class="op">=</span><span class="st">"black"</span>,</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Uncertainty in Marginal Rate of Substitution </span><span class="ch">\n</span><span class="st"> Operating Costs / Installation Costs"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div class="">
<figure class="figure">
<p class=""><a href="example_discretechoice_files/figure-html/cell-17-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="example_discretechoice_files/figure-html/cell-17-output-1.png" width="2011" height="1011" class="figure-img"></a></p>
</figure>
</div>
</div>
</div></div>
<div id="cell-19" class="cell markdown">
<section id="bells-and-whistles" class="level1">
<h1>Bells and Whistles</h1>
<p>Adding some cool extra features by: - using a multivariate normal distirbution – this allows for correlation among alternatives - controlling for income in a log-affine fashion</p>
<p>Intuitively not sure how the correlation is identified, given that you only observe the actual choice</p>
</section>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [17]:</pre></div><div id="cell-20" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>coords <span class="op">=</span> {</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"alts_intercepts"</span>: [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>],</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"alts_probs"</span>: [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>, <span class="st">"hp"</span>],</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"obs"</span>: <span class="bu">range</span>(N),</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> pm.Model(coords<span class="op">=</span>coords) <span class="im">as</span> model_3:</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">## Add data to experiment with changes later.</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    ic_ec <span class="op">=</span> pm.Data(<span class="st">"ic_ec"</span>, wide_heating_df[<span class="st">"ic.ec"</span>])</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    oc_ec <span class="op">=</span> pm.Data(<span class="st">"oc_ec"</span>, wide_heating_df[<span class="st">"oc.ec"</span>])</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>    ic_er <span class="op">=</span> pm.Data(<span class="st">"ic_er"</span>, wide_heating_df[<span class="st">"ic.er"</span>])</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>    oc_er <span class="op">=</span> pm.Data(<span class="st">"oc_er"</span>, wide_heating_df[<span class="st">"oc.er"</span>])</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    beta_ic <span class="op">=</span> pm.Normal(<span class="st">"beta_ic"</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>    beta_oc <span class="op">=</span> pm.Normal(<span class="st">"beta_oc"</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>    beta_income <span class="op">=</span> pm.Normal(<span class="st">"beta_income"</span>, <span class="dv">0</span>, <span class="dv">1</span>, dims<span class="op">=</span><span class="st">"alts_intercepts"</span>)</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>    chol, corr, stds <span class="op">=</span> pm.LKJCholeskyCov(</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">"chol"</span>, n<span class="op">=</span><span class="dv">4</span>, eta<span class="op">=</span><span class="fl">2.0</span>, sd_dist<span class="op">=</span>pm.Exponential.dist(<span class="fl">1.0</span>, shape<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>    alphas <span class="op">=</span> pm.MvNormal(<span class="st">"alpha"</span>, mu<span class="op">=</span><span class="dv">0</span>, chol<span class="op">=</span>chol, dims<span class="op">=</span><span class="st">"alts_intercepts"</span>)</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>    u0 <span class="op">=</span> alphas[<span class="dv">0</span>] <span class="op">+</span> beta_ic <span class="op">*</span> ic_ec <span class="op">+</span> beta_oc <span class="op">*</span> oc_ec <span class="op">+</span> beta_income[<span class="dv">0</span>] <span class="op">*</span> wide_heating_df[<span class="st">"income"</span>]</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>    u1 <span class="op">=</span> alphas[<span class="dv">1</span>] <span class="op">+</span> beta_ic <span class="op">*</span> ic_er <span class="op">+</span> beta_oc <span class="op">*</span> oc_er <span class="op">+</span> beta_income[<span class="dv">1</span>] <span class="op">*</span> wide_heating_df[<span class="st">"income"</span>]</span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>    u2 <span class="op">=</span> (</span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>        alphas[<span class="dv">2</span>]</span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>        <span class="op">+</span> beta_ic <span class="op">*</span> wide_heating_df[<span class="st">"ic.gc"</span>]</span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>        <span class="op">+</span> beta_oc <span class="op">*</span> wide_heating_df[<span class="st">"oc.gc"</span>]</span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>        <span class="op">+</span> beta_income[<span class="dv">2</span>] <span class="op">*</span> wide_heating_df[<span class="st">"income"</span>]</span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a>    u3 <span class="op">=</span> (</span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a>        alphas[<span class="dv">3</span>]</span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a>        <span class="op">+</span> beta_ic <span class="op">*</span> wide_heating_df[<span class="st">"ic.gr"</span>]</span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a>        <span class="op">+</span> beta_oc <span class="op">*</span> wide_heating_df[<span class="st">"oc.gr"</span>]</span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a>        <span class="op">+</span> beta_income[<span class="dv">3</span>] <span class="op">*</span> wide_heating_df[<span class="st">"income"</span>]</span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a>    u4 <span class="op">=</span> np.zeros(N)  <span class="co"># pivot</span></span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a>    s <span class="op">=</span> pm.math.stack([u0, u1, u2, u3, u4]).T</span>
<span id="cb24-37"><a href="#cb24-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-38"><a href="#cb24-38" aria-hidden="true" tabindex="-1"></a>    p_ <span class="op">=</span> pm.Deterministic(<span class="st">"p"</span>, pm.math.softmax(s, axis<span class="op">=</span><span class="dv">1</span>), dims<span class="op">=</span>(<span class="st">"obs"</span>, <span class="st">"alts_probs"</span>))</span>
<span id="cb24-39"><a href="#cb24-39" aria-hidden="true" tabindex="-1"></a>    choice_obs <span class="op">=</span> pm.Categorical(<span class="st">"y_cat"</span>, p<span class="op">=</span>p_, observed<span class="op">=</span>observed, dims<span class="op">=</span><span class="st">"obs"</span>)</span>
<span id="cb24-40"><a href="#cb24-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-41"><a href="#cb24-41" aria-hidden="true" tabindex="-1"></a>    idata_m3 <span class="op">=</span> pm.sample_prior_predictive()</span>
<span id="cb24-42"><a href="#cb24-42" aria-hidden="true" tabindex="-1"></a>    idata_m3.extend(</span>
<span id="cb24-43"><a href="#cb24-43" aria-hidden="true" tabindex="-1"></a>        pm.sample(nuts_sampler<span class="op">=</span><span class="st">"numpyro"</span>, idata_kwargs<span class="op">=</span>{<span class="st">"log_likelihood"</span>: <span class="va">True</span>}, random_seed<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb24-44"><a href="#cb24-44" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb24-45"><a href="#cb24-45" aria-hidden="true" tabindex="-1"></a>    idata_m3.extend(pm.sample_posterior_predictive(idata_m3))</span>
<span id="cb24-46"><a href="#cb24-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-47"><a href="#cb24-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-48"><a href="#cb24-48" aria-hidden="true" tabindex="-1"></a>pm.model_to_graphviz(model_3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Sampling: [alpha, beta_ic, beta_income, beta_oc, chol, y_cat]</code></pre>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"a04baefb8f2249d08d305d88772d62c0","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"84c1490d0cb544c58ade3352d5b0f7ce","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"b7c07b909889477895c5378c498e0cd7","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"617300181f484b91bb46d0b4da7eb346","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>There were 713 divergences after tuning. Increase `target_accept` or reparameterize.
The rhat statistic is larger than 1.01 for some parameters. This indicates problems during sampling. See https://arxiv.org/abs/1903.08008 for details
The effective sample size per chain is smaller than 100 for some parameters.  A higher number is needed for reliable rhat and ess computation. See https://arxiv.org/abs/1903.08008 for details
Sampling: [y_cat]</code></pre>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"d7171676a88e49018085545a1cc2ab60","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="17">
<div class="">
<figure class="figure">
<p class=""><a href="example_discretechoice_files/figure-html/cell-18-output-10.svg" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="example_discretechoice_files/figure-html/cell-18-output-10.svg" class="img-fluid figure-img"></a></p>
</figure>
</div>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [18]:</pre></div><div id="cell-21" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">10</span>))</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> axs[<span class="dv">0</span>]</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> wide_heating_df.groupby(<span class="st">"depvar"</span>)[<span class="st">"idcase"</span>].count()</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>predicted_shares <span class="op">=</span> idata_m3[<span class="st">"posterior"</span>][<span class="st">"p"</span>].mean(dim<span class="op">=</span>[<span class="st">"chain"</span>, <span class="st">"draw"</span>, <span class="st">"obs"</span>])</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>ci_lb <span class="op">=</span> idata_m3[<span class="st">"posterior"</span>][<span class="st">"p"</span>].quantile(<span class="fl">0.025</span>, dim<span class="op">=</span>[<span class="st">"chain"</span>, <span class="st">"draw"</span>, <span class="st">"obs"</span>])</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>ci_ub <span class="op">=</span> idata_m3[<span class="st">"posterior"</span>][<span class="st">"p"</span>].quantile(<span class="fl">0.975</span>, dim<span class="op">=</span>[<span class="st">"chain"</span>, <span class="st">"draw"</span>, <span class="st">"obs"</span>])</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>ax.scatter(ci_lb, [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>, <span class="st">"hp"</span>], color<span class="op">=</span><span class="st">"k"</span>, s<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>ax.scatter(ci_ub, [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>, <span class="st">"hp"</span>], color<span class="op">=</span><span class="st">"k"</span>, s<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>ax.scatter(</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>    counts <span class="op">/</span> counts.<span class="bu">sum</span>(),</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>, <span class="st">"hp"</span>],</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>    label<span class="op">=</span><span class="st">"Observed Shares"</span>,</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"red"</span>,</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>    s<span class="op">=</span><span class="dv">100</span>,</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>ax.hlines(</span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>, <span class="st">"hp"</span>], ci_lb, ci_ub, label<span class="op">=</span><span class="st">"Predicted 95% Interval"</span>, color<span class="op">=</span><span class="st">"black"</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Observed V Predicted Shares"</span>)</span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>az.plot_ppc(idata_m3, ax<span class="op">=</span>axs[<span class="dv">1</span>])</span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>].set_title(<span class="st">"Posterior Predictive Checks"</span>)</span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Shares"</span>)</span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Heating System"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div class="">
<figure class="figure">
<p class=""><a href="example_discretechoice_files/figure-html/cell-19-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="example_discretechoice_files/figure-html/cell-19-output-1.png" width="2011" height="1011" class="figure-img"></a></p>
</figure>
</div>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [19]:</pre></div><div id="cell-22" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>az.summary(</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    idata_m3, var_names<span class="op">=</span>[<span class="st">"beta_income"</span>, <span class="st">"beta_ic"</span>, <span class="st">"beta_oc"</span>, <span class="st">"alpha"</span>, <span class="st">"chol_corr"</span>], round_to<span class="op">=</span><span class="dv">4</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/gzheng/projects/professional/likert_dualresponse/.venv/lib/python3.11/site-packages/arviz/stats/diagnostics.py:592: RuntimeWarning: invalid value encountered in scalar divide
  (between_chain_variance / within_chain_variance + num_samples - 1) / (num_samples)</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="19">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">sd</th>
<th data-quarto-table-cell-role="th">hdi_3%</th>
<th data-quarto-table-cell-role="th">hdi_97%</th>
<th data-quarto-table-cell-role="th">mcse_mean</th>
<th data-quarto-table-cell-role="th">mcse_sd</th>
<th data-quarto-table-cell-role="th">ess_bulk</th>
<th data-quarto-table-cell-role="th">ess_tail</th>
<th data-quarto-table-cell-role="th">r_hat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">beta_income[ec]</td>
<td>0.1090</td>
<td>0.1045</td>
<td>-0.1194</td>
<td>0.2745</td>
<td>0.0111</td>
<td>0.0079</td>
<td>125.5245</td>
<td>1785.3613</td>
<td>1.0326</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">beta_income[er]</td>
<td>0.0568</td>
<td>0.0985</td>
<td>-0.1462</td>
<td>0.2349</td>
<td>0.0034</td>
<td>0.0081</td>
<td>814.4173</td>
<td>1351.8588</td>
<td>1.1603</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">beta_income[gc]</td>
<td>0.0701</td>
<td>0.0810</td>
<td>-0.0908</td>
<td>0.2230</td>
<td>0.0039</td>
<td>0.0028</td>
<td>514.8539</td>
<td>1447.0504</td>
<td>1.0928</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">beta_income[gr]</td>
<td>-0.0182</td>
<td>0.0991</td>
<td>-0.2034</td>
<td>0.1530</td>
<td>0.0166</td>
<td>0.0119</td>
<td>43.2790</td>
<td>1394.2747</td>
<td>1.0660</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">beta_ic</td>
<td>0.0005</td>
<td>0.0007</td>
<td>-0.0008</td>
<td>0.0016</td>
<td>0.0002</td>
<td>0.0001</td>
<td>21.2834</td>
<td>1025.6984</td>
<td>1.1204</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">beta_oc</td>
<td>-0.0037</td>
<td>0.0014</td>
<td>-0.0063</td>
<td>-0.0008</td>
<td>0.0001</td>
<td>0.0001</td>
<td>130.7170</td>
<td>1819.1965</td>
<td>1.0273</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">alpha[ec]</td>
<td>0.9330</td>
<td>1.0135</td>
<td>-0.4580</td>
<td>2.9612</td>
<td>0.1099</td>
<td>0.0780</td>
<td>361.4979</td>
<td>1033.9501</td>
<td>1.0793</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">alpha[er]</td>
<td>1.1878</td>
<td>1.0135</td>
<td>-0.3409</td>
<td>3.1845</td>
<td>0.0761</td>
<td>0.0608</td>
<td>377.7638</td>
<td>1058.1381</td>
<td>1.1560</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">alpha[gc]</td>
<td>2.2653</td>
<td>0.7507</td>
<td>1.2054</td>
<td>3.7209</td>
<td>0.1258</td>
<td>0.0897</td>
<td>46.5848</td>
<td>959.9773</td>
<td>1.0614</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">alpha[gr]</td>
<td>1.0156</td>
<td>0.9110</td>
<td>-0.1379</td>
<td>2.6814</td>
<td>0.2079</td>
<td>0.1493</td>
<td>17.7565</td>
<td>40.8513</td>
<td>1.1541</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">chol_corr[0, 0]</td>
<td>1.0000</td>
<td>0.0000</td>
<td>1.0000</td>
<td>1.0000</td>
<td>0.0000</td>
<td>0.0000</td>
<td>4000.0000</td>
<td>4000.0000</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">chol_corr[0, 1]</td>
<td>0.1392</td>
<td>0.3365</td>
<td>-0.5441</td>
<td>0.7382</td>
<td>0.0075</td>
<td>0.0220</td>
<td>2135.5951</td>
<td>2551.8261</td>
<td>1.1486</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">chol_corr[0, 2]</td>
<td>0.0750</td>
<td>0.3488</td>
<td>-0.5012</td>
<td>0.7344</td>
<td>0.0588</td>
<td>0.0419</td>
<td>47.6418</td>
<td>1379.3299</td>
<td>1.0662</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">chol_corr[0, 3]</td>
<td>0.0536</td>
<td>0.3764</td>
<td>-0.5126</td>
<td>0.7631</td>
<td>0.0860</td>
<td>0.0618</td>
<td>24.2892</td>
<td>2253.6964</td>
<td>1.1096</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">chol_corr[1, 0]</td>
<td>0.1392</td>
<td>0.3365</td>
<td>-0.5441</td>
<td>0.7382</td>
<td>0.0075</td>
<td>0.0220</td>
<td>2135.5951</td>
<td>2551.8261</td>
<td>1.1486</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">chol_corr[1, 1]</td>
<td>1.0000</td>
<td>0.0000</td>
<td>1.0000</td>
<td>1.0000</td>
<td>0.0000</td>
<td>0.0000</td>
<td>38.4914</td>
<td>2944.7704</td>
<td>1.0696</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">chol_corr[1, 2]</td>
<td>0.1438</td>
<td>0.3286</td>
<td>-0.4194</td>
<td>0.8010</td>
<td>0.0223</td>
<td>0.0344</td>
<td>199.9289</td>
<td>2081.5502</td>
<td>1.0314</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">chol_corr[1, 3]</td>
<td>0.0821</td>
<td>0.3555</td>
<td>-0.4699</td>
<td>0.7795</td>
<td>0.0605</td>
<td>0.0431</td>
<td>45.2660</td>
<td>2019.6281</td>
<td>1.0575</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">chol_corr[2, 0]</td>
<td>0.0750</td>
<td>0.3488</td>
<td>-0.5012</td>
<td>0.7344</td>
<td>0.0588</td>
<td>0.0419</td>
<td>47.6418</td>
<td>1379.3299</td>
<td>1.0662</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">chol_corr[2, 1]</td>
<td>0.1438</td>
<td>0.3286</td>
<td>-0.4194</td>
<td>0.8010</td>
<td>0.0223</td>
<td>0.0344</td>
<td>199.9289</td>
<td>2081.5502</td>
<td>1.0314</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">chol_corr[2, 2]</td>
<td>1.0000</td>
<td>0.0000</td>
<td>1.0000</td>
<td>1.0000</td>
<td>0.0000</td>
<td>0.0000</td>
<td>21.0671</td>
<td>3321.0770</td>
<td>1.1213</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">chol_corr[2, 3]</td>
<td>0.0885</td>
<td>0.4025</td>
<td>-0.5738</td>
<td>0.6999</td>
<td>0.1268</td>
<td>0.0924</td>
<td>12.2708</td>
<td>4.3794</td>
<td>1.2387</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">chol_corr[3, 0]</td>
<td>0.0536</td>
<td>0.3764</td>
<td>-0.5126</td>
<td>0.7631</td>
<td>0.0860</td>
<td>0.0618</td>
<td>24.2892</td>
<td>2253.6964</td>
<td>1.1096</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">chol_corr[3, 1]</td>
<td>0.0821</td>
<td>0.3555</td>
<td>-0.4699</td>
<td>0.7795</td>
<td>0.0605</td>
<td>0.0431</td>
<td>45.2660</td>
<td>2019.6281</td>
<td>1.0575</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">chol_corr[3, 2]</td>
<td>0.0885</td>
<td>0.4025</td>
<td>-0.5738</td>
<td>0.6999</td>
<td>0.1268</td>
<td>0.0924</td>
<td>12.2708</td>
<td>4.3794</td>
<td>1.2387</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">chol_corr[3, 3]</td>
<td>1.0000</td>
<td>0.0000</td>
<td>1.0000</td>
<td>1.0000</td>
<td>0.0000</td>
<td>0.0000</td>
<td>3464.6160</td>
<td>3626.8755</td>
<td>1.0597</td>
</tr>
</tbody>
</table>

</div>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [20]:</pre></div><div id="cell-23" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>post <span class="op">=</span> az.extract(idata_m3)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>substitution_rate <span class="op">=</span> post[<span class="st">"beta_oc"</span>] <span class="op">/</span> post[<span class="st">"beta_ic"</span>]</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>substitution_rate.mean().item()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>-13.242388002273604</code></pre>
</div>
</div></div>
<div id="cell-24" class="cell markdown">
<section id="tweaks" class="level1">
<h1>Tweaks</h1>
<p>My preferred model is model 2, but with - a control for income - (ideally) set-constrained coefficients for installation cost and operating cost. However, this doesn’t work. In practice it’s because the coefficients are both so small (especially the <span class="math inline">\(\beta_\text{installation cost}\)</span>) that constraining it is difficult</p>
<p>Because they’re so small and so close to zero, it’s also not meaningful to talk about a MRS.</p>
</section>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [21]:</pre></div><div id="cell-25" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>coords <span class="op">=</span> {</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"alts_intercepts"</span>: [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>],</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"alts_probs"</span>: [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>, <span class="st">"hp"</span>],</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"obs"</span>: <span class="bu">range</span>(N),</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> pm.Model(coords<span class="op">=</span>coords) <span class="im">as</span> model_4:</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    beta_ic <span class="op">=</span> pm.Normal(<span class="st">"beta_ic"</span>)</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    beta_oc <span class="op">=</span> pm.Normal(<span class="st">"beta_oc"</span>)</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>    beta_income <span class="op">=</span> pm.Normal(<span class="st">"beta_income"</span>, <span class="dv">0</span>, <span class="dv">1</span>, dims<span class="op">=</span><span class="st">"alts_intercepts"</span>)</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>    alphas <span class="op">=</span> pm.Normal(<span class="st">"alpha"</span>, <span class="dv">0</span>, <span class="dv">5</span>, dims<span class="op">=</span><span class="st">"alts_intercepts"</span>)</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">## Construct Utility matrix and Pivot using an intercept per alternative</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>    u0 <span class="op">=</span> alphas[<span class="dv">0</span>] <span class="op">+</span> beta_ic <span class="op">*</span> wide_heating_df[<span class="st">"ic.ec"</span>] <span class="op">+</span> beta_oc <span class="op">*</span> wide_heating_df[<span class="st">"oc.ec"</span>] <span class="op">+</span> beta_income[<span class="dv">0</span>] <span class="op">*</span> wide_heating_df[<span class="st">"income"</span>]</span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>    u1 <span class="op">=</span> alphas[<span class="dv">1</span>] <span class="op">+</span> beta_ic <span class="op">*</span> wide_heating_df[<span class="st">"ic.er"</span>] <span class="op">+</span> beta_oc <span class="op">*</span> wide_heating_df[<span class="st">"oc.er"</span>] <span class="op">+</span> beta_income[<span class="dv">1</span>] <span class="op">*</span> wide_heating_df[<span class="st">"income"</span>]</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>    u2 <span class="op">=</span> alphas[<span class="dv">2</span>] <span class="op">+</span> beta_ic <span class="op">*</span> wide_heating_df[<span class="st">"ic.gc"</span>] <span class="op">+</span> beta_oc <span class="op">*</span> wide_heating_df[<span class="st">"oc.gc"</span>] <span class="op">+</span> beta_income[<span class="dv">2</span>] <span class="op">*</span> wide_heating_df[<span class="st">"income"</span>]</span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>    u3 <span class="op">=</span> alphas[<span class="dv">3</span>] <span class="op">+</span> beta_ic <span class="op">*</span> wide_heating_df[<span class="st">"ic.gr"</span>] <span class="op">+</span> beta_oc <span class="op">*</span> wide_heating_df[<span class="st">"oc.gr"</span>] <span class="op">+</span> beta_income[<span class="dv">3</span>] <span class="op">*</span> wide_heating_df[<span class="st">"income"</span>]</span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>    u4 <span class="op">=</span> np.zeros(N)  <span class="co"># Outside Good</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>    s <span class="op">=</span> pm.math.stack([u0, u1, u2, u3, u4]).T</span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">## Apply Softmax Transform</span></span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>    p_ <span class="op">=</span> pm.Deterministic(<span class="st">"p"</span>, pm.math.softmax(s, axis<span class="op">=</span><span class="dv">1</span>), dims<span class="op">=</span>(<span class="st">"obs"</span>, <span class="st">"alts_probs"</span>))</span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">## Likelihood</span></span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>    choice_obs <span class="op">=</span> pm.Categorical(<span class="st">"y_cat"</span>, p<span class="op">=</span>p_, observed<span class="op">=</span>observed, dims<span class="op">=</span><span class="st">"obs"</span>)</span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>    idata_m4 <span class="op">=</span> pm.sample_prior_predictive()</span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a>    idata_m4.extend(</span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a>        pm.sample(nuts_sampler<span class="op">=</span><span class="st">"numpyro"</span>, idata_kwargs<span class="op">=</span>{<span class="st">"log_likelihood"</span>: <span class="va">True</span>}, random_seed<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a>    idata_m4.extend(pm.sample_posterior_predictive(idata_m4))</span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true" tabindex="-1"></a>pm.model_to_graphviz(model_4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Sampling: [alpha, beta_ic, beta_income, beta_oc, y_cat]</code></pre>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"116ff0a546e244f9b1f4ea040e78cb81","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"75fa02a612dc413eb3140eb6e73b5455","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"77c5b0cf9ff04d9085c6b3ed046e35be","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"54d6fa3c1e4949c9b20e0aa8f4d5ed76","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Sampling: [y_cat]</code></pre>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"47c1db2d8a5e438b97dad0da331b6a14","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="21">
<div class="">
<figure class="figure">
<p class=""><a href="example_discretechoice_files/figure-html/cell-22-output-10.svg" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="example_discretechoice_files/figure-html/cell-22-output-10.svg" class="img-fluid figure-img"></a></p>
</figure>
</div>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [22]:</pre></div><div id="cell-26" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">10</span>))</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> axs[<span class="dv">0</span>]</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> wide_heating_df.groupby(<span class="st">"depvar"</span>)[<span class="st">"idcase"</span>].count()</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>predicted_shares <span class="op">=</span> idata_m4[<span class="st">"posterior"</span>][<span class="st">"p"</span>].mean(dim<span class="op">=</span>[<span class="st">"chain"</span>, <span class="st">"draw"</span>, <span class="st">"obs"</span>])</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>ci_lb <span class="op">=</span> idata_m4[<span class="st">"posterior"</span>][<span class="st">"p"</span>].quantile(<span class="fl">0.025</span>, dim<span class="op">=</span>[<span class="st">"chain"</span>, <span class="st">"draw"</span>, <span class="st">"obs"</span>])</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>ci_ub <span class="op">=</span> idata_m4[<span class="st">"posterior"</span>][<span class="st">"p"</span>].quantile(<span class="fl">0.975</span>, dim<span class="op">=</span>[<span class="st">"chain"</span>, <span class="st">"draw"</span>, <span class="st">"obs"</span>])</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>ax.scatter(ci_lb, [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>, <span class="st">"hp"</span>], color<span class="op">=</span><span class="st">"k"</span>, s<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>ax.scatter(ci_ub, [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>, <span class="st">"hp"</span>], color<span class="op">=</span><span class="st">"k"</span>, s<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>ax.scatter(</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>    counts <span class="op">/</span> counts.<span class="bu">sum</span>(),</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>, <span class="st">"hp"</span>],</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>    label<span class="op">=</span><span class="st">"Observed Shares"</span>,</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"red"</span>,</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>    s<span class="op">=</span><span class="dv">100</span>,</span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>ax.hlines(</span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>, <span class="st">"hp"</span>], ci_lb, ci_ub, label<span class="op">=</span><span class="st">"Predicted 95% Interval"</span>, color<span class="op">=</span><span class="st">"black"</span></span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Observed V Predicted Shares"</span>)</span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a>az.plot_ppc(idata_m4, ax<span class="op">=</span>axs[<span class="dv">1</span>])</span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>].set_title(<span class="st">"Posterior Predictive Checks"</span>)</span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Shares"</span>)</span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Heating System"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div class="">
<figure class="figure">
<p class=""><a href="example_discretechoice_files/figure-html/cell-23-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="example_discretechoice_files/figure-html/cell-23-output-1.png" width="2011" height="1011" class="figure-img"></a></p>
</figure>
</div>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [23]:</pre></div><div id="cell-27" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>az.summary(</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    idata_m4, var_names<span class="op">=</span>[<span class="st">"beta_ic"</span>, <span class="st">"beta_oc"</span>, <span class="st">"beta_income"</span>, <span class="st">"alpha"</span>], round_to<span class="op">=</span><span class="dv">4</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">sd</th>
<th data-quarto-table-cell-role="th">hdi_3%</th>
<th data-quarto-table-cell-role="th">hdi_97%</th>
<th data-quarto-table-cell-role="th">mcse_mean</th>
<th data-quarto-table-cell-role="th">mcse_sd</th>
<th data-quarto-table-cell-role="th">ess_bulk</th>
<th data-quarto-table-cell-role="th">ess_tail</th>
<th data-quarto-table-cell-role="th">r_hat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">beta_ic</td>
<td>-0.0007</td>
<td>0.0006</td>
<td>-0.0018</td>
<td>0.0004</td>
<td>0.0000</td>
<td>0.0000</td>
<td>2034.8098</td>
<td>2619.1608</td>
<td>1.0010</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">beta_oc</td>
<td>-0.0055</td>
<td>0.0015</td>
<td>-0.0081</td>
<td>-0.0025</td>
<td>0.0000</td>
<td>0.0000</td>
<td>2549.3952</td>
<td>3052.4259</td>
<td>1.0023</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">beta_income[ec]</td>
<td>-0.0415</td>
<td>0.1123</td>
<td>-0.2552</td>
<td>0.1597</td>
<td>0.0032</td>
<td>0.0023</td>
<td>1233.5860</td>
<td>1949.2437</td>
<td>1.0024</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">beta_income[er]</td>
<td>-0.0708</td>
<td>0.1064</td>
<td>-0.2544</td>
<td>0.1412</td>
<td>0.0031</td>
<td>0.0022</td>
<td>1151.0759</td>
<td>1873.4452</td>
<td>1.0022</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">beta_income[gc]</td>
<td>-0.0527</td>
<td>0.0866</td>
<td>-0.2195</td>
<td>0.1042</td>
<td>0.0027</td>
<td>0.0019</td>
<td>1063.0967</td>
<td>1595.1725</td>
<td>1.0012</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">beta_income[gr]</td>
<td>-0.1619</td>
<td>0.0990</td>
<td>-0.3460</td>
<td>0.0231</td>
<td>0.0029</td>
<td>0.0021</td>
<td>1134.4858</td>
<td>1809.5429</td>
<td>1.0011</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">alpha[ec]</td>
<td>3.5846</td>
<td>0.9338</td>
<td>1.9701</td>
<td>5.4876</td>
<td>0.0286</td>
<td>0.0204</td>
<td>1066.7882</td>
<td>1428.9757</td>
<td>1.0018</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">alpha[er]</td>
<td>3.8573</td>
<td>0.9128</td>
<td>2.1368</td>
<td>5.5381</td>
<td>0.0294</td>
<td>0.0210</td>
<td>968.1931</td>
<td>1275.9228</td>
<td>1.0013</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">alpha[gc]</td>
<td>4.1892</td>
<td>0.6397</td>
<td>2.9483</td>
<td>5.3714</td>
<td>0.0211</td>
<td>0.0150</td>
<td>918.4178</td>
<td>1199.7850</td>
<td>1.0012</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">alpha[gr]</td>
<td>3.1823</td>
<td>0.7224</td>
<td>1.8973</td>
<td>4.5941</td>
<td>0.0232</td>
<td>0.0165</td>
<td>967.8811</td>
<td>1118.1689</td>
<td>1.0017</td>
</tr>
</tbody>
</table>

</div>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [24]:</pre></div><div id="cell-28" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>post <span class="op">=</span> az.extract(idata_m4)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>substitution_rate <span class="op">=</span> post[<span class="st">"beta_oc"</span>] <span class="op">/</span> post[<span class="st">"beta_ic"</span>]</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>substitution_rate.mean().item()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>31.17482352077738</code></pre>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [25]:</pre></div><div id="cell-29" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">10</span>))</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>ax.hist(</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    substitution_rate,</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    bins<span class="op">=</span><span class="dv">30</span>,</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    ec<span class="op">=</span><span class="st">"black"</span>,</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Uncertainty in Marginal Rate of Substitution </span><span class="ch">\n</span><span class="st"> Operating Costs / Installation Costs"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div class="">
<figure class="figure">
<p class=""><a href="example_discretechoice_files/figure-html/cell-26-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11"><img src="example_discretechoice_files/figure-html/cell-26-output-1.png" width="2011" height="1011" class="figure-img"></a></p>
</figure>
</div>
</div>
</div></div>
<div id="cell-30" class="cell markdown">
<section id="counterfactuals" class="level1">
<h1>Counterfactuals</h1>
</section>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [26]:</pre></div><div id="cell-31" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> model_3:</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># update values of predictors with new 20% price increase in operating costs for electrical options</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    pm.set_data({<span class="st">"oc_ec"</span>: wide_heating_df[<span class="st">"oc.ec"</span>] <span class="op">*</span> <span class="fl">1.2</span>, <span class="st">"oc_er"</span>: wide_heating_df[<span class="st">"oc.er"</span>] <span class="op">*</span> <span class="fl">1.2</span>})</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># use the updated values and predict outcomes and probabilities:</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    idata_new_policy <span class="op">=</span> pm.sample_posterior_predictive(</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>        idata_m3,</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>        var_names<span class="op">=</span>[<span class="st">"p"</span>, <span class="st">"y_cat"</span>],</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>        return_inferencedata<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>        predictions<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>        extend_inferencedata<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>        random_seed<span class="op">=</span><span class="dv">100</span>,</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>idata_new_policy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Sampling: [y_cat]</code></pre>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"724384ed57c94a83be6fcafaa9b55d2c","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="26">

            <div>
              <div class="xr-header">
                <div class="xr-obj-type">arviz.InferenceData</div>
              </div>
              <ul class="xr-sections group-sections">
              
            <li class="xr-section-item">
                  <input id="idata_predictionsd98ada03-a129-4b7a-973f-26a5daba6d39" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_predictionsd98ada03-a129-4b7a-973f-26a5daba6d39" class="xr-section-summary">predictions</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 173MB
Dimensions:     (chain: 4, draw: 1000, obs: 900, alts_probs: 5)
Coordinates:
  * chain       (chain) int64 32B 0 1 2 3
  * draw        (draw) int64 8kB 0 1 2 3 4 5 6 7 ... 993 994 995 996 997 998 999
  * obs         (obs) int64 7kB 0 1 2 3 4 5 6 7 ... 893 894 895 896 897 898 899
  * alts_probs  (alts_probs) &lt;U2 40B 'ec' 'er' 'gc' 'gr' 'hp'
Data variables:
    p           (chain, draw, obs, alts_probs) float64 144MB 0.05725 ... 0.04717
    y_cat       (chain, draw, obs) int64 29MB 2 4 4 2 1 2 2 2 ... 3 3 2 1 2 4 2
Attributes:
    created_at:                 2024-06-23T20:34:06.401295+00:00
    arviz_version:              0.18.0
    inference_library:          pymc
    inference_library_version:  5.15.1</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-ff6db017-572b-4988-bf1e-4f2917e5dcc6" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-ff6db017-572b-4988-bf1e-4f2917e5dcc6" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">chain</span>: 4</li><li><span class="xr-has-index">draw</span>: 1000</li><li><span class="xr-has-index">obs</span>: 900</li><li><span class="xr-has-index">alts_probs</span>: 5</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-5bf3d195-fb89-41c7-958c-92284ccbdcfe" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-5bf3d195-fb89-41c7-958c-92284ccbdcfe" class="xr-section-summary">Coordinates: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(chain)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3</div><input id="attrs-6cf5a1cf-9dbc-422a-ba03-ab9c0daacde6" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-6cf5a1cf-9dbc-422a-ba03-ab9c0daacde6" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-b2282a76-b91b-41fc-bf20-891e3d785ed1" class="xr-var-data-in" type="checkbox"><label for="data-b2282a76-b91b-41fc-bf20-891e3d785ed1" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0, 1, 2, 3])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 995 996 997 998 999</div><input id="attrs-6a6b1a7e-b8d9-4230-aa51-25ff24dbd389" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-6a6b1a7e-b8d9-4230-aa51-25ff24dbd389" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-74986031-fa08-42d0-8029-e2cb7150a633" class="xr-var-data-in" type="checkbox"><label for="data-74986031-fa08-42d0-8029-e2cb7150a633" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 997, 998, 999])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">obs</span></div><div class="xr-var-dims">(obs)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 895 896 897 898 899</div><input id="attrs-fc08714d-bec6-47f4-935a-bb435737a380" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-fc08714d-bec6-47f4-935a-bb435737a380" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-0c116faf-e1fc-4433-a993-831c36a272bf" class="xr-var-data-in" type="checkbox"><label for="data-0c116faf-e1fc-4433-a993-831c36a272bf" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 897, 898, 899])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">alts_probs</span></div><div class="xr-var-dims">(alts_probs)</div><div class="xr-var-dtype">&lt;U2</div><div class="xr-var-preview xr-preview">'ec' 'er' 'gc' 'gr' 'hp'</div><input id="attrs-291b0eb4-24cd-4b14-b315-6f7205cf7f07" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-291b0eb4-24cd-4b14-b315-6f7205cf7f07" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-b026e739-0dae-477c-a124-d0cb3f0967e1" class="xr-var-data-in" type="checkbox"><label for="data-b026e739-0dae-477c-a124-d0cb3f0967e1" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['ec', 'er', 'gc', 'gr', 'hp'], dtype='&lt;U2')</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-018ce695-7ed5-45ae-93c4-5a5af765ee2b" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-018ce695-7ed5-45ae-93c4-5a5af765ee2b" class="xr-section-summary">Data variables: <span>(2)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>p</span></div><div class="xr-var-dims">(chain, draw, obs, alts_probs)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.05725 0.06145 ... 0.1894 0.04717</div><input id="attrs-45f8d977-33ba-4433-ab8a-d9512e36ec5e" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-45f8d977-33ba-4433-ab8a-d9512e36ec5e" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-ff013801-f77b-4811-9d74-61b9c682d1e0" class="xr-var-data-in" type="checkbox"><label for="data-ff013801-f77b-4811-9d74-61b9c682d1e0" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[[0.05724768, 0.06144754, 0.68573654, 0.12073992, 0.07482832],
         [0.0536941 , 0.06504792, 0.66728469, 0.13613161, 0.07784168],
         [0.06074645, 0.07880667, 0.63082648, 0.15196209, 0.0776583 ],
         ...,
         [0.05956621, 0.07063259, 0.65266042, 0.13936663, 0.07777414],
         [0.06049453, 0.0836567 , 0.63028224, 0.14349363, 0.0820729 ],
         [0.04665807, 0.07612694, 0.61031866, 0.17417927, 0.09271705]],

        [[0.0575523 , 0.05957472, 0.70580507, 0.12394815, 0.05311976],
         [0.04978846, 0.05194444, 0.70624589, 0.13173661, 0.0602846 ],
         [0.05858354, 0.06523037, 0.65436287, 0.15864973, 0.06317349],
         ...,
         [0.0572611 , 0.06067699, 0.67328214, 0.15106374, 0.05771602],
         [0.05613799, 0.08006781, 0.64611688, 0.15639254, 0.06128477],
         [0.03569163, 0.04690307, 0.65923192, 0.18508592, 0.07308747]],

        [[0.03848548, 0.06967034, 0.71777804, 0.11688472, 0.05718142],
         [0.04106635, 0.06133217, 0.70216202, 0.12892532, 0.06651414],
         [0.05499752, 0.08312547, 0.62147335, 0.17002871, 0.07037495],
         ...,
...
         ...,
         [0.05812185, 0.07607232, 0.66578602, 0.14396336, 0.05605645],
         [0.06088941, 0.08638921, 0.64408592, 0.14895731, 0.05967816],
         [0.05234028, 0.06589006, 0.65931254, 0.14420871, 0.07824841]],

        [[0.04946695, 0.04037203, 0.74481053, 0.10060332, 0.06474716],
         [0.05557851, 0.04546533, 0.71803102, 0.10593543, 0.07498971],
         [0.07094328, 0.07473905, 0.60520828, 0.16683318, 0.08227621],
         ...,
         [0.05864539, 0.05887554, 0.64364577, 0.17843161, 0.0604017 ],
         [0.04773015, 0.08160192, 0.63828546, 0.17464675, 0.05773572],
         [0.04628499, 0.05529322, 0.60885068, 0.24491774, 0.04465337]],

        [[0.03588243, 0.06452423, 0.70246049, 0.13061053, 0.06652232],
         [0.04836715, 0.064673  , 0.69243603, 0.12374824, 0.07077557],
         [0.0621403 , 0.08466819, 0.62086437, 0.15856235, 0.07376478],
         ...,
         [0.04919897, 0.07558963, 0.6408676 , 0.17349437, 0.06084943],
         [0.04264316, 0.09181579, 0.6372937 , 0.16979284, 0.05845452],
         [0.06034545, 0.06557241, 0.6375511 , 0.18935961, 0.04717142]]]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>y_cat</span></div><div class="xr-var-dims">(chain, draw, obs)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">2 4 4 2 1 2 2 2 ... 3 3 3 2 1 2 4 2</div><input id="attrs-b6986981-f37d-4b71-bddd-d7ee9724e320" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-b6986981-f37d-4b71-bddd-d7ee9724e320" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-3a71467a-9017-46da-a4e3-9e284d666f8a" class="xr-var-data-in" type="checkbox"><label for="data-3a71467a-9017-46da-a4e3-9e284d666f8a" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[2, 4, 4, ..., 3, 2, 2],
        [1, 0, 0, ..., 2, 2, 2],
        [2, 2, 2, ..., 2, 2, 2],
        ...,
        [3, 2, 1, ..., 2, 2, 2],
        [2, 2, 2, ..., 2, 2, 2],
        [0, 2, 2, ..., 2, 2, 2]],

       [[0, 2, 2, ..., 2, 0, 2],
        [2, 0, 2, ..., 2, 0, 1],
        [4, 2, 2, ..., 2, 3, 3],
        ...,
        [2, 2, 2, ..., 2, 2, 2],
        [2, 3, 2, ..., 3, 0, 3],
        [2, 2, 3, ..., 2, 2, 2]],

       [[2, 2, 2, ..., 2, 2, 3],
        [2, 2, 4, ..., 2, 0, 1],
        [2, 0, 4, ..., 2, 4, 3],
        ...,
        [4, 4, 2, ..., 2, 1, 2],
        [2, 4, 1, ..., 2, 2, 2],
        [3, 3, 3, ..., 2, 4, 2]],

       [[2, 2, 3, ..., 2, 2, 2],
        [2, 2, 2, ..., 2, 2, 1],
        [2, 2, 2, ..., 2, 2, 2],
        ...,
        [2, 0, 2, ..., 2, 1, 2],
        [2, 2, 2, ..., 3, 2, 3],
        [2, 3, 1, ..., 2, 4, 2]]])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-66f73139-8731-4f18-881e-54af431a7e85" class="xr-section-summary-in" type="checkbox"><label for="section-66f73139-8731-4f18-881e-54af431a7e85" class="xr-section-summary">Indexes: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>chain</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-60e38610-47ad-44fd-bb29-d693243b1d54" class="xr-index-data-in" type="checkbox"><label for="index-60e38610-47ad-44fd-bb29-d693243b1d54" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([0, 1, 2, 3], dtype='int64', name='chain'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>draw</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-c395f821-338f-428e-95e5-f8ed9532ca76" class="xr-index-data-in" type="checkbox"><label for="index-c395f821-338f-428e-95e5-f8ed9532ca76" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
       ...
       990, 991, 992, 993, 994, 995, 996, 997, 998, 999],
      dtype='int64', name='draw', length=1000))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>obs</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-9e2fcaef-d3ba-4067-8ccf-ce5e347d4a1a" class="xr-index-data-in" type="checkbox"><label for="index-9e2fcaef-d3ba-4067-8ccf-ce5e347d4a1a" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
       ...
       890, 891, 892, 893, 894, 895, 896, 897, 898, 899],
      dtype='int64', name='obs', length=900))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>alts_probs</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-c0daa62e-083e-4713-9164-ebcf09a0241b" class="xr-index-data-in" type="checkbox"><label for="index-c0daa62e-083e-4713-9164-ebcf09a0241b" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index(['ec', 'er', 'gc', 'gr', 'hp'], dtype='object', name='alts_probs'))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-afa7ae9c-7cf9-4da6-964f-2ae85585ed91" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-afa7ae9c-7cf9-4da6-964f-2ae85585ed91" class="xr-section-summary">Attributes: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2024-06-23T20:34:06.401295+00:00</dd><dt><span>arviz_version :</span></dt><dd>0.18.0</dd><dt><span>inference_library :</span></dt><dd>pymc</dd><dt><span>inference_library_version :</span></dt><dd>5.15.1</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
            <li class="xr-section-item">
                  <input id="idata_predictions_constant_data9c91b07b-a1b0-4429-a9ff-3e2090b8ee04" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_predictions_constant_data9c91b07b-a1b0-4429-a9ff-3e2090b8ee04" class="xr-section-summary">predictions_constant_data</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 58kB
Dimensions:      (ic_ec_dim_0: 900, ic_er_dim_0: 900, oc_ec_dim_0: 900,
                  oc_er_dim_0: 900)
Coordinates:
  * ic_ec_dim_0  (ic_ec_dim_0) int64 7kB 0 1 2 3 4 5 ... 894 895 896 897 898 899
  * ic_er_dim_0  (ic_er_dim_0) int64 7kB 0 1 2 3 4 5 ... 894 895 896 897 898 899
  * oc_ec_dim_0  (oc_ec_dim_0) int64 7kB 0 1 2 3 4 5 ... 894 895 896 897 898 899
  * oc_er_dim_0  (oc_er_dim_0) int64 7kB 0 1 2 3 4 5 ... 894 895 896 897 898 899
Data variables:
    ic_ec        (ic_ec_dim_0) float64 7kB 859.9 796.8 719.9 ... 799.8 967.9
    ic_er        (ic_er_dim_0) float64 7kB 995.8 894.7 ... 1.123e+03 1.092e+03
    oc_ec        (oc_ec_dim_0) float64 7kB 664.0 624.3 526.9 ... 594.2 622.4
    oc_er        (oc_er_dim_0) float64 7kB 606.7 583.8 485.7 ... 481.9 550.2
Attributes:
    created_at:                 2024-06-23T20:34:06.404039+00:00
    arviz_version:              0.18.0
    inference_library:          pymc
    inference_library_version:  5.15.1</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-ab64f366-f6f5-4da2-97bf-c18c26db299c" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-ab64f366-f6f5-4da2-97bf-c18c26db299c" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">ic_ec_dim_0</span>: 900</li><li><span class="xr-has-index">ic_er_dim_0</span>: 900</li><li><span class="xr-has-index">oc_ec_dim_0</span>: 900</li><li><span class="xr-has-index">oc_er_dim_0</span>: 900</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-f85304cf-2210-4a9c-84ce-e689d0d750be" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-f85304cf-2210-4a9c-84ce-e689d0d750be" class="xr-section-summary">Coordinates: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">ic_ec_dim_0</span></div><div class="xr-var-dims">(ic_ec_dim_0)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 895 896 897 898 899</div><input id="attrs-399d683d-50a8-4d07-a4f2-807b4594bee9" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-399d683d-50a8-4d07-a4f2-807b4594bee9" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-948d0f9a-48cf-44ea-8d4f-945578a1deb1" class="xr-var-data-in" type="checkbox"><label for="data-948d0f9a-48cf-44ea-8d4f-945578a1deb1" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 897, 898, 899])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">ic_er_dim_0</span></div><div class="xr-var-dims">(ic_er_dim_0)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 895 896 897 898 899</div><input id="attrs-6051b625-f783-4388-a5bf-cbefeb3fa320" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-6051b625-f783-4388-a5bf-cbefeb3fa320" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-3509be9f-2932-4bea-8f0a-ecb7c7eddd9b" class="xr-var-data-in" type="checkbox"><label for="data-3509be9f-2932-4bea-8f0a-ecb7c7eddd9b" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 897, 898, 899])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">oc_ec_dim_0</span></div><div class="xr-var-dims">(oc_ec_dim_0)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 895 896 897 898 899</div><input id="attrs-c7183f01-dc56-4c7e-92e7-85e4885bb16e" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-c7183f01-dc56-4c7e-92e7-85e4885bb16e" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-019189f8-d6a2-4318-972a-9931f084c31f" class="xr-var-data-in" type="checkbox"><label for="data-019189f8-d6a2-4318-972a-9931f084c31f" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 897, 898, 899])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">oc_er_dim_0</span></div><div class="xr-var-dims">(oc_er_dim_0)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 895 896 897 898 899</div><input id="attrs-160f806c-ae9a-498f-85b4-ae798bd1323c" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-160f806c-ae9a-498f-85b4-ae798bd1323c" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-5f261462-72a3-4f3c-93d7-02c5aa0a8e8d" class="xr-var-data-in" type="checkbox"><label for="data-5f261462-72a3-4f3c-93d7-02c5aa0a8e8d" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 897, 898, 899])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-291d0841-b5fd-4ed3-b04d-75c9739bee7d" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-291d0841-b5fd-4ed3-b04d-75c9739bee7d" class="xr-section-summary">Data variables: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>ic_ec</span></div><div class="xr-var-dims">(ic_ec_dim_0)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">859.9 796.8 719.9 ... 799.8 967.9</div><input id="attrs-4903fae9-f9c3-4d91-a6fb-2e62a76ca219" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-4903fae9-f9c3-4d91-a6fb-2e62a76ca219" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-c07a440d-123c-4ac1-a153-ce0efaa47749" class="xr-var-data-in" type="checkbox"><label for="data-c07a440d-123c-4ac1-a153-ce0efaa47749" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([ 859.9 ,  796.82,  719.86,  761.25,  858.86,  693.74,  633.63,
        813.33,  875.7 ,  775.86,  792.29,  944.35,  797.34,  687.18,
        594.  ,  801.2 ,  821.79,  696.89,  572.3 ,  925.62,  788.07,
        934.75,  619.65,  805.29,  943.05,  882.55,  869.65,  991.82,
        724.01,  805.08,  838.01,  671.78, 1030.3 ,  785.95,  689.1 ,
        918.92,  618.3 ,  891.58,  899.  ,  776.67,  788.79,  891.47,
        828.73,  874.67,  796.43,  938.58,  588.55,  825.11,  828.27,
        733.4 ,  754.26,  836.85,  963.76,  751.67, 1021.7 ,  843.18,
        625.26,  970.49,  727.13,  762.51,  747.32,  608.57,  937.96,
        912.46,  805.94,  790.89,  743.31,  702.5 ,  901.4 ,  971.55,
        612.24,  780.07,  776.18,  804.51,  683.38,  994.11,  696.87,
        680.51,  830.42,  829.45,  721.85,  602.71,  845.69,  798.54,
        757.17,  800.49,  890.49,  850.44,  834.43,  573.53,  689.92,
        704.06,  692.2 ,  993.06,  948.83,  826.91,  700.09,  763.54,
        977.49,  772.38, 1034.7 ,  857.21,  773.6 ,  941.68,  780.37,
        782.98,  751.48,  832.19,  830.27,  889.23,  830.64,  746.92,
        804.48,  682.43,  558.6 ,  781.41,  959.49,  816.38,  860.01,
        702.16, 1115.3 ,  801.58,  867.54,  837.86,  792.1 , 1011.1 ,
        959.82,  829.68,  825.94,  699.84,  875.86,  835.  ,  889.76,
        746.42,  769.34,  686.17,  638.89,  968.98,  746.87,  951.02,
...
       1088.9 ,  953.25,  975.47,  739.3 ,  683.59,  762.3 ,  829.64,
        678.08, 1132.1 ,  927.19,  850.24,  920.17,  871.7 ,  923.98,
        724.22,  634.18,  778.44,  829.65,  653.52, 1084.7 ,  866.22,
       1104.4 ,  747.36,  802.2 ,  655.31,  745.85,  775.23,  777.17,
        974.98,  861.16,  542.66,  924.5 ,  583.76,  944.95,  708.19,
        711.34,  904.8 ,  832.63,  736.37,  755.84,  932.63,  877.49,
        835.05,  894.63,  738.95,  729.29,  728.25,  727.56,  856.33,
       1170.2 ,  677.33,  769.68,  917.17,  729.99,  906.88,  787.11,
        758.53,  891.55, 1056.2 ,  765.5 ,  935.82,  654.82, 1060.4 ,
        904.44,  754.59,  877.16,  705.33,  907.46, 1035.7 ,  778.12,
        952.24,  987.31,  710.32,  813.24,  915.55,  832.4 ,  690.63,
        924.76,  782.23, 1052.2 ,  915.47,  591.07,  580.45,  654.78,
        951.81,  849.29,  752.82,  657.91,  645.62,  818.47,  925.21,
        711.15,  977.86,  884.21,  814.93,  790.7 ,  832.93,  869.97,
        772.97,  861.66,  971.8 ,  774.22,  717.59, 1068.1 ,  902.09,
        779.6 ,  956.44,  890.78,  783.42,  863.74,  984.2 ,  689.48,
        896.96,  838.66,  788.  ,  923.13,  940.1 ,  993.93,  711.93,
        722.87,  805.08,  960.95,  762.37,  916.23,  758.47,  557.39,
        982.54,  898.36,  834.27,  822.31,  984.25,  813.69,  751.59,
       1047.6 ,  842.79,  799.76,  967.88])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>ic_er</span></div><div class="xr-var-dims">(ic_er_dim_0)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">995.8 894.7 ... 1.123e+03 1.092e+03</div><input id="attrs-c5883a4d-c6b6-46ff-9138-d5404651ddde" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-c5883a4d-c6b6-46ff-9138-d5404651ddde" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-ad114652-0684-450b-96a5-604628c67a8e" class="xr-var-data-in" type="checkbox"><label for="data-ad114652-0684-450b-96a5-604628c67a8e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([ 995.76,  894.69,  900.11,  831.04,  985.64,  862.56,  952.3 ,
       1012.3 , 1024.8 ,  874.49,  774.69, 1325.  ,  880.8 ,  718.72,
        736.77, 1092.4 ,  969.64,  853.82,  664.22, 1140.  ,  799.52,
       1009.5 ,  880.97,  806.59, 1130.5 , 1187.9 ,  942.49,  913.32,
        993.25,  941.41, 1144.4 ,  976.01, 1153.2 ,  963.54,  876.97,
        897.8 ,  819.38, 1070.1 , 1060.2 , 1054.  ,  833.05, 1148.3 ,
        938.83,  966.34, 1054.4 , 1098.1 ,  810.51, 1143.9 ,  929.43,
       1012.7 ,  994.12, 1026.5 , 1278.3 ,  906.09, 1162.7 ,  884.68,
        736.03, 1330.1 ,  878.61,  996.61, 1130.9 ,  810.97, 1100.5 ,
        950.35, 1304.  , 1115.9 ,  856.94,  752.47, 1197.4 , 1043.9 ,
        795.83,  946.68,  824.73,  831.37,  865.94, 1081.8 ,  916.09,
       1191.8 , 1059.3 , 1159.6 ,  921.97,  790.37,  866.67,  948.05,
        903.52, 1051.1 ,  923.99,  990.48,  845.59,  670.05,  964.66,
       1131.4 ,  848.99, 1075.7 , 1031.8 ,  993.83,  856.06,  980.45,
       1290.7 ,  862.07, 1185.4 , 1072.5 , 1023.6 ,  934.18,  902.04,
       1039.1 ,  909.56,  961.74,  963.76, 1107.1 ,  946.4 ,  917.13,
        822.85,  712.86,  714.01,  966.06, 1146.7 , 1120.  , 1048.7 ,
        984.69, 1225.5 , 1125.4 , 1004.8 , 1027.6 , 1015.1 , 1142.5 ,
        937.12,  879.88,  949.07,  875.49,  942.76,  957.79, 1028.2 ,
       1143.9 ,  979.5 ,  931.27,  722.43,  942.23,  851.91, 1082.1 ,
...
       1210.  , 1168.1 , 1210.7 ,  989.9 ,  935.29,  824.84, 1015.9 ,
       1121.  , 1174.5 , 1089.5 , 1116.4 , 1050.6 ,  910.56, 1069.6 ,
        993.27,  777.28, 1150.1 , 1038.7 ,  911.5 , 1275.4 ,  906.27,
       1416.7 ,  845.54, 1003.1 ,  891.1 ,  919.38,  854.6 ,  825.66,
       1122.1 , 1022.7 ,  835.91, 1084.8 ,  658.38, 1147.2 ,  757.77,
        794.42,  933.16,  965.96,  893.67,  912.42, 1123.3 , 1140.7 ,
        894.26, 1173.7 ,  762.06,  859.23,  803.77,  825.  , 1131.5 ,
       1417.8 ,  912.44,  766.79, 1034.7 ,  653.97, 1183.1 ,  865.21,
        704.74, 1012.5 , 1263.4 , 1057.5 , 1023.5 ,  622.99, 1304.7 ,
       1078.2 ,  972.28, 1050.2 ,  907.67,  907.25, 1017.8 ,  985.2 ,
        891.76, 1157.5 ,  910.15,  809.95, 1105.8 ,  993.83,  890.9 ,
       1175.6 ,  979.25, 1293.8 , 1026.3 ,  733.76,  777.04,  849.56,
       1138.7 , 1255.9 ,  845.15,  843.31,  931.4 , 1029.8 , 1165.4 ,
        871.97,  963.42, 1156.5 , 1150.3 , 1058.  , 1080.6 , 1080.4 ,
       1042.4 ,  973.06,  943.57,  865.61,  863.93, 1328.  , 1057.7 ,
        988.55, 1132.  ,  989.09,  685.23,  980.36, 1121.1 ,  840.17,
        966.41, 1175.4 , 1117.6 , 1265.8 , 1148.6 , 1067.5 ,  972.16,
       1169.7 ,  996.96,  965.23,  907.4 , 1067.7 , 1057.3 ,  650.59,
       1042.7 ,  988.99,  987.05, 1045.3 , 1246.5 , 1064.1 ,  869.78,
       1292.6 , 1041.3 , 1123.2 , 1091.7 ])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>oc_ec</span></div><div class="xr-var-dims">(oc_ec_dim_0)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">664.0 624.3 526.9 ... 594.2 622.4</div><input id="attrs-6b1f84bc-492f-43bf-8e92-1509f1d8b45f" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-6b1f84bc-492f-43bf-8e92-1509f1d8b45f" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-db2f5e8a-7c62-4261-b71c-4329c78b1cb9" class="xr-var-data-in" type="checkbox"><label for="data-db2f5e8a-7c62-4261-b71c-4329c78b1cb9" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([664.008, 624.288, 526.872, 579.6  , 485.292, 477.864, 574.032,
       602.88 , 663.576, 638.664, 513.72 , 681.996, 488.052, 439.104,
       509.652, 531.792, 519.096, 435.588, 409.392, 674.028, 529.188,
       596.124, 500.784, 718.98 , 692.64 , 633.456, 584.388, 701.796,
       532.584, 648.384, 623.124, 506.784, 720.696, 642.576, 503.52 ,
       566.688, 537.24 , 591.828, 499.128, 589.32 , 632.616, 708.684,
       518.904, 521.532, 546.096, 584.244, 463.596, 565.524, 656.28 ,
       564.276, 501.384, 623.688, 671.916, 659.772, 647.748, 527.64 ,
       499.392, 712.848, 474.24 , 524.52 , 550.26 , 473.448, 666.216,
       585.408, 628.068, 578.172, 490.488, 473.796, 697.344, 586.788,
       458.232, 579.78 , 484.992, 523.872, 439.368, 648.528, 468.072,
       574.368, 648.804, 580.5  , 541.224, 518.736, 565.44 , 588.36 ,
       557.472, 589.644, 530.724, 496.536, 504.312, 493.68 , 599.184,
       589.488, 595.86 , 620.028, 728.496, 672.396, 522.744, 484.932,
       667.8  , 632.736, 662.784, 472.596, 579.276, 604.608, 546.744,
       583.536, 512.172, 470.628, 615.288, 682.608, 669.216, 528.156,
       562.332, 424.152, 505.056, 587.712, 664.548, 613.416, 636.456,
       654.984, 758.172, 578.304, 575.04 , 576.504, 560.592, 780.384,
       490.992, 586.86 , 582.9  , 567.3  , 607.98 , 499.668, 536.76 ,
       674.22 , 518.712, 598.872, 511.092, 561.876, 547.236, 557.58 ,
...
       729.12 , 691.02 , 647.256, 591.   , 585.54 , 486.444, 630.516,
       576.912, 688.512, 652.884, 651.06 , 603.876, 644.4  , 616.896,
       511.668, 427.152, 642.18 , 594.648, 456.348, 706.14 , 600.468,
       796.368, 486.396, 613.932, 439.536, 506.604, 510.324, 414.024,
       658.32 , 683.436, 380.7  , 517.08 , 423.552, 569.496, 441.888,
       603.576, 580.38 , 668.256, 531.972, 580.44 , 475.8  , 644.988,
       624.624, 664.44 , 399.588, 509.172, 434.292, 409.38 , 522.444,
       814.404, 496.116, 589.176, 683.58 , 500.172, 597.876, 531.948,
       449.4  , 660.204, 735.396, 658.956, 593.208, 386.94 , 661.584,
       610.68 , 394.104, 590.472, 597.36 , 566.676, 609.06 , 569.16 ,
       603.168, 614.148, 539.172, 477.228, 557.292, 513.18 , 479.64 ,
       709.668, 596.532, 743.748, 572.244, 466.632, 406.632, 488.16 ,
       632.676, 639.624, 494.016, 505.128, 514.92 , 539.1  , 647.304,
       471.324, 634.2  , 614.928, 585.468, 626.712, 562.776, 677.52 ,
       604.272, 658.152, 643.668, 474.516, 558.552, 773.664, 704.196,
       508.932, 720.432, 539.436, 588.96 , 642.936, 613.992, 522.372,
       603.24 , 596.772, 569.58 , 679.92 , 683.508, 602.784, 538.188,
       630.816, 524.808, 648.192, 568.248, 531.756, 609.78 , 446.16 ,
       598.536, 603.384, 481.284, 590.22 , 653.82 , 608.268, 569.376,
       846.432, 574.632, 594.24 , 622.416])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>oc_er</span></div><div class="xr-var-dims">(oc_er_dim_0)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">606.7 583.8 485.7 ... 481.9 550.2</div><input id="attrs-f0b3582d-c2ee-4516-9244-b85d465d1b60" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-f0b3582d-c2ee-4516-9244-b85d465d1b60" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-8685c897-8cdb-4055-8eb0-3cee8436f954" class="xr-var-data-in" type="checkbox"><label for="data-8685c897-8cdb-4055-8eb0-3cee8436f954" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([606.72 , 583.788, 485.688, 510.264, 467.424, 445.248, 535.164,
       557.724, 542.112, 566.868, 456.936, 570.864, 405.636, 474.168,
       387.54 , 456.228, 535.656, 538.116, 348.888, 633.864, 343.548,
       497.748, 434.688, 467.52 , 612.792, 546.96 , 512.532, 567.72 ,
       528.252, 523.596, 596.028, 494.952, 660.264, 567.252, 438.192,
       505.908, 410.832, 523.5  , 568.38 , 519.096, 480.552, 696.876,
       479.748, 525.684, 491.664, 559.428, 355.692, 558.72 , 582.048,
       613.944, 517.752, 446.76 , 679.86 , 421.752, 584.82 , 451.968,
       439.788, 712.812, 479.844, 578.652, 409.14 , 489.132, 512.1  ,
       558.   , 555.012, 505.428, 471.924, 331.92 , 613.68 , 533.052,
       408.072, 489.732, 492.936, 560.292, 413.088, 494.928, 433.2  ,
       438.852, 420.168, 503.172, 471.684, 353.136, 515.94 , 569.664,
       509.472, 536.46 , 464.484, 477.768, 472.416, 460.572, 474.168,
       553.368, 497.496, 548.724, 586.32 , 574.2  , 526.404, 476.676,
       595.32 , 479.184, 634.272, 454.764, 546.144, 531.924, 479.784,
       536.76 , 517.584, 475.296, 565.344, 587.472, 521.268, 439.812,
       423.348, 284.004, 468.744, 376.212, 513.96 , 574.764, 574.32 ,
       484.908, 702.132, 530.832, 535.032, 507.372, 479.064, 645.84 ,
       483.972, 395.472, 499.956, 450.276, 516.864, 520.956, 516.468,
       556.884, 501.432, 513.684, 377.7  , 557.376, 499.932, 614.1  ,
...
       636.432, 585.42 , 673.332, 477.252, 486.312, 374.568, 479.928,
       534.396, 553.068, 605.112, 541.692, 519.756, 545.328, 544.38 ,
       526.176, 438.552, 593.088, 598.932, 394.584, 797.316, 503.556,
       685.86 , 449.736, 561.684, 422.76 , 477.42 , 528.276, 447.54 ,
       683.868, 577.956, 402.012, 464.784, 424.884, 516.432, 389.16 ,
       461.448, 444.012, 521.904, 427.008, 509.496, 449.28 , 589.416,
       458.88 , 532.44 , 506.16 , 449.652, 400.548, 357.744, 576.   ,
       730.716, 529.872, 478.98 , 603.684, 340.56 , 562.344, 542.436,
       422.58 , 530.268, 651.444, 427.308, 650.796, 440.52 , 707.772,
       561.96 , 406.44 , 497.232, 501.156, 480.876, 551.424, 563.46 ,
       565.5  , 619.176, 517.68 , 548.172, 547.332, 502.956, 437.364,
       598.656, 513.252, 638.868, 573.624, 369.432, 389.784, 398.76 ,
       568.212, 606.876, 491.568, 377.436, 509.028, 475.704, 656.064,
       400.752, 458.664, 673.512, 527.628, 446.244, 505.344, 549.672,
       655.86 , 561.024, 587.856, 487.74 , 412.308, 645.456, 624.312,
       436.968, 642.864, 572.004, 484.524, 481.344, 528.672, 440.82 ,
       495.936, 529.992, 496.212, 666.48 , 442.62 , 605.712, 531.216,
       414.684, 477.432, 506.34 , 556.272, 522.432, 556.464, 422.532,
       512.808, 524.892, 403.812, 546.756, 587.34 , 491.112, 504.78 ,
       661.932, 538.332, 481.872, 550.236])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-41181b88-be48-4b6a-b149-b9d0d6e9a8a5" class="xr-section-summary-in" type="checkbox"><label for="section-41181b88-be48-4b6a-b149-b9d0d6e9a8a5" class="xr-section-summary">Indexes: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>ic_ec_dim_0</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-8e86bc16-cc2b-431a-9fdd-b6f71bb0311b" class="xr-index-data-in" type="checkbox"><label for="index-8e86bc16-cc2b-431a-9fdd-b6f71bb0311b" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
       ...
       890, 891, 892, 893, 894, 895, 896, 897, 898, 899],
      dtype='int64', name='ic_ec_dim_0', length=900))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>ic_er_dim_0</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-51b22c2e-66c1-4d94-b992-6e2d278640a4" class="xr-index-data-in" type="checkbox"><label for="index-51b22c2e-66c1-4d94-b992-6e2d278640a4" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
       ...
       890, 891, 892, 893, 894, 895, 896, 897, 898, 899],
      dtype='int64', name='ic_er_dim_0', length=900))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>oc_ec_dim_0</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-688cdfd3-84cd-4bfd-87a6-d8ad4de5f8c8" class="xr-index-data-in" type="checkbox"><label for="index-688cdfd3-84cd-4bfd-87a6-d8ad4de5f8c8" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
       ...
       890, 891, 892, 893, 894, 895, 896, 897, 898, 899],
      dtype='int64', name='oc_ec_dim_0', length=900))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>oc_er_dim_0</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-85084483-cc83-4ac0-b7f4-ed855307103c" class="xr-index-data-in" type="checkbox"><label for="index-85084483-cc83-4ac0-b7f4-ed855307103c" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
       ...
       890, 891, 892, 893, 894, 895, 896, 897, 898, 899],
      dtype='int64', name='oc_er_dim_0', length=900))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-146b08fd-9953-4604-8209-2186dee75e15" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-146b08fd-9953-4604-8209-2186dee75e15" class="xr-section-summary">Attributes: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2024-06-23T20:34:06.404039+00:00</dd><dt><span>arviz_version :</span></dt><dd>0.18.0</dd><dt><span>inference_library :</span></dt><dd>pymc</dd><dt><span>inference_library_version :</span></dt><dd>5.15.1</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
              </ul>
            </div>
            <style> /* CSS stylesheet for displaying InferenceData objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-sections.group-sections {
  grid-template-columns: auto;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
.xr-wrap{width:700px!important;} </style>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [27]:</pre></div><div id="cell-32" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>idata_new_policy[<span class="st">"predictions"</span>][<span class="st">"p"</span>].mean(dim<span class="op">=</span>[<span class="st">"chain"</span>, <span class="st">"draw"</span>, <span class="st">"obs"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.DataArray 'p' (alts_probs: 5)&gt; Size: 40B
array([0.05293203, 0.07065756, 0.66509458, 0.14841689, 0.06289894])
Coordinates:
  * alts_probs  (alts_probs) &lt;U2 40B 'ec' 'er' 'gc' 'gr' 'hp'</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.DataArray</div><div class="xr-array-name">'p'</div><ul class="xr-dim-list"><li><span class="xr-has-index">alts_probs</span>: 5</li></ul></div><ul class="xr-sections"><li class="xr-section-item"><div class="xr-array-wrap"><input id="section-21c61b01-a29e-4b30-ac40-01d8614973c9" class="xr-array-in" type="checkbox" checked=""><label for="section-21c61b01-a29e-4b30-ac40-01d8614973c9" title="Show/hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-array-preview xr-preview"><span>0.05293 0.07066 0.6651 0.1484 0.0629</span></div><div class="xr-array-data"><pre>array([0.05293203, 0.07065756, 0.66509458, 0.14841689, 0.06289894])</pre></div></div></li><li class="xr-section-item"><input id="section-0489732f-39ff-4482-9930-627c1b42bcd0" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-0489732f-39ff-4482-9930-627c1b42bcd0" class="xr-section-summary">Coordinates: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">alts_probs</span></div><div class="xr-var-dims">(alts_probs)</div><div class="xr-var-dtype">&lt;U2</div><div class="xr-var-preview xr-preview">'ec' 'er' 'gc' 'gr' 'hp'</div><input id="attrs-8e3f7d1b-dd69-4c4d-81d8-29e42c047c19" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-8e3f7d1b-dd69-4c4d-81d8-29e42c047c19" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-b5cb2c42-02be-4f46-94ad-4ec75bfbd34a" class="xr-var-data-in" type="checkbox"><label for="data-b5cb2c42-02be-4f46-94ad-4ec75bfbd34a" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['ec', 'er', 'gc', 'gr', 'hp'], dtype='&lt;U2')</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-43807b7d-a9db-4ff7-9c1b-2ea4be794c75" class="xr-section-summary-in" type="checkbox"><label for="section-43807b7d-a9db-4ff7-9c1b-2ea4be794c75" class="xr-section-summary">Indexes: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>alts_probs</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-99ad3d01-17ae-436b-8052-3e594bb1ab2e" class="xr-index-data-in" type="checkbox"><label for="index-99ad3d01-17ae-436b-8052-3e594bb1ab2e" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index(['ec', 'er', 'gc', 'gr', 'hp'], dtype='object', name='alts_probs'))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-96f5390f-167f-4f0e-9132-a822e583cbfc" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-96f5390f-167f-4f0e-9132-a822e583cbfc" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [28]:</pre></div><div id="cell-33" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">10</span>))</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> wide_heating_df.groupby(<span class="st">"depvar"</span>)[<span class="st">"idcase"</span>].count()</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>new_predictions <span class="op">=</span> idata_new_policy[<span class="st">"predictions"</span>][<span class="st">"p"</span>].mean(dim<span class="op">=</span>[<span class="st">"chain"</span>, <span class="st">"draw"</span>, <span class="st">"obs"</span>]).values</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>ci_lb <span class="op">=</span> idata_m3[<span class="st">"posterior"</span>][<span class="st">"p"</span>].quantile(<span class="fl">0.025</span>, dim<span class="op">=</span>[<span class="st">"chain"</span>, <span class="st">"draw"</span>, <span class="st">"obs"</span>])</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>ci_ub <span class="op">=</span> idata_m3[<span class="st">"posterior"</span>][<span class="st">"p"</span>].quantile(<span class="fl">0.975</span>, dim<span class="op">=</span>[<span class="st">"chain"</span>, <span class="st">"draw"</span>, <span class="st">"obs"</span>])</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>ax.scatter(ci_lb, [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>, <span class="st">"hp"</span>], color<span class="op">=</span><span class="st">"k"</span>, s<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>ax.scatter(ci_ub, [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>, <span class="st">"hp"</span>], color<span class="op">=</span><span class="st">"k"</span>, s<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>ax.scatter(</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>    new_predictions,</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>, <span class="st">"hp"</span>],</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"green"</span>,</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>    label<span class="op">=</span><span class="st">"New Policy Predicted Share"</span>,</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>    s<span class="op">=</span><span class="dv">100</span>,</span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>ax.scatter(</span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>    counts <span class="op">/</span> counts.<span class="bu">sum</span>(),</span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>, <span class="st">"hp"</span>],</span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>    label<span class="op">=</span><span class="st">"Observed Shares"</span>,</span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"red"</span>,</span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>    s<span class="op">=</span><span class="dv">100</span>,</span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>ax.hlines(</span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"ec"</span>, <span class="st">"er"</span>, <span class="st">"gc"</span>, <span class="st">"gr"</span>, <span class="st">"hp"</span>],</span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a>    ci_lb,</span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a>    ci_ub,</span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true" tabindex="-1"></a>    label<span class="op">=</span><span class="st">"Predicted 95% Credible Interval Old Policy"</span>,</span>
<span id="cb43-27"><a href="#cb43-27" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"black"</span>,</span>
<span id="cb43-28"><a href="#cb43-28" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb43-29"><a href="#cb43-29" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Predicted Market Shares under Old and New Pricing Policy"</span>, fontsize<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb43-30"><a href="#cb43-30" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Market Share"</span>)</span>
<span id="cb43-31"><a href="#cb43-31" aria-hidden="true" tabindex="-1"></a>ax.legend()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div class="">
<figure class="figure">
<p class=""><a href="example_discretechoice_files/figure-html/cell-29-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12"><img src="example_discretechoice_files/figure-html/cell-29-output-1.png" width="2011" height="1011" class="figure-img"></a></p>
</figure>
</div>
</div>
</div></div>
<div id="cell-34" class="cell markdown">
<section id="compare-models" class="level1">
<h1>Compare models</h1>
</section>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [29]:</pre></div><div id="cell-35" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>compare <span class="op">=</span> az.compare({<span class="st">"m1"</span>: idata_m1, <span class="st">"m2"</span>: idata_m2, <span class="st">"m3"</span>: idata_m3, <span class="st">"m4"</span>: idata_m4})</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>compare</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/gzheng/projects/professional/likert_dualresponse/.venv/lib/python3.11/site-packages/arviz/stats/stats.py:789: UserWarning: Estimated shape parameter of Pareto distribution is greater than 0.7 for one or more samples. You should consider using a more robust model, this is because importance sampling is less likely to work well if the marginal posterior and LOO posterior are very different. This is more likely to happen with a non-robust model and highly influential observations.
  warnings.warn(</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="29">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">rank</th>
<th data-quarto-table-cell-role="th">elpd_loo</th>
<th data-quarto-table-cell-role="th">p_loo</th>
<th data-quarto-table-cell-role="th">elpd_diff</th>
<th data-quarto-table-cell-role="th">weight</th>
<th data-quarto-table-cell-role="th">se</th>
<th data-quarto-table-cell-role="th">dse</th>
<th data-quarto-table-cell-role="th">warning</th>
<th data-quarto-table-cell-role="th">scale</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">m4</td>
<td>0</td>
<td>-1020.574185</td>
<td>9.992352</td>
<td>0.000000</td>
<td>7.557224e-01</td>
<td>28.247545</td>
<td>0.000000</td>
<td>False</td>
<td>log</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">m2</td>
<td>1</td>
<td>-1023.552608</td>
<td>5.038925</td>
<td>2.978423</td>
<td>2.305736e-01</td>
<td>27.799085</td>
<td>3.623620</td>
<td>False</td>
<td>log</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">m3</td>
<td>2</td>
<td>-1025.780290</td>
<td>9.345972</td>
<td>5.206104</td>
<td>1.972889e-13</td>
<td>28.163863</td>
<td>3.007272</td>
<td>True</td>
<td>log</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">m1</td>
<td>3</td>
<td>-1309.642978</td>
<td>1.228472</td>
<td>289.068792</td>
<td>1.370393e-02</td>
<td>12.918328</td>
<td>23.321276</td>
<td>False</td>
<td>log</td>
</tr>
</tbody>
</table>

</div>
</div>
</div></div>
     </main>
<!-- /main column -->  <script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>  </div> <!-- /content -->  <script>var lightboxQuarto = GLightbox({"openEffect":"zoom","closeEffect":"zoom","descPosition":"bottom","loop":false,"selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script> 
  
</body></html>